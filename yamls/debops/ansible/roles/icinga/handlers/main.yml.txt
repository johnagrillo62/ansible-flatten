[0].name = Check icinga2 configuration and restart it on the master node
[0]["ansible.builtin.command"] = icinga2 daemon -C
[0].register = icinga__register_check_config
[0].changed_when = icinga__register_check_config.changed | bool
[0].notify[0] = Restart icinga2 on the master node
[0].delegate_to = {{ icinga__master_delegate_to }}
[1].name = Restart icinga2 on the master node
[1]["ansible.builtin.service"].name = icinga2
[1]["ansible.builtin.service"].state = restarted
[1].delegate_to = {{ icinga__master_delegate_to }}
[2].name = Trigger Icinga Director configuration deployment
[2]["ansible.builtin.uri"].body_format = json
[2]["ansible.builtin.uri"].headers.Accept = application/json
[2]["ansible.builtin.uri"].method = POST
[2]["ansible.builtin.uri"].url = {{ icinga__director_deploy_api_url }}
[2]["ansible.builtin.uri"].user = {{ icinga__director_deploy_api_user }}
[2]["ansible.builtin.uri"].password = {{ icinga__director_deploy_api_password }}
[2].run_once = True
[2].when = icinga__director_deploy | bool
[2].no_log = {{ debops__no_log | d(True) }}
