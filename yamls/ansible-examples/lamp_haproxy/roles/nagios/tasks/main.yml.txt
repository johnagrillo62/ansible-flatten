[0].name = install nagios
[0].yum = pkg={{ item }} state=present
[0].with_items[0] = nagios
[0].with_items[1] = nagios-plugins
[0].with_items[2] = nagios-plugins-nrpe
[0].with_items[3] = nagios-plugins-ping
[0].with_items[4] = nagios-plugins-ssh
[0].with_items[5] = nagios-plugins-http
[0].with_items[6] = nagios-plugins-mysql
[0].with_items[7] = nagios-devel
[0].notify = restart httpd
[1].name = create nagios config dir
[1].file = path=/etc/nagios/ansible-managed state=directory
[2].name = configure nagios
[2].copy = src=nagios.cfg dest=/etc/nagios/nagios.cfg
[2].notify = restart nagios
[3].name = configure localhost monitoring
[3].copy = src=localhost.cfg dest=/etc/nagios/objects/localhost.cfg
[3].notify = restart nagios
[4].name = configure nagios services
[4].copy = src=ansible-managed-services.cfg dest=/etc/nagios/
[5].name = create the nagios object files
[5].template = src={{ item + ".j2" }} dest=/etc/nagios/ansible-managed/{{ item }}
[5].with_items[0] = webservers.cfg
[5].with_items[1] = dbservers.cfg
[5].with_items[2] = lbservers.cfg
[5].notify = restart nagios
[6].name = start nagios
[6].service = name=nagios state=started enabled=yes
