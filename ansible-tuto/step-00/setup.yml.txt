~d0.hosts = all
~d1.become = true
~d1.become_user = root
~d1.remote_user = vagrant
~d1.gather_facts = false
~d1.tasks = 
~d2.name = Wait for ssh to be up
~d3.become = false
~d3.wait_for = 
~d4.port = 22
~d4.delay = 5
~d4.connect_timeout = 5
~d4.timeout = 360
~d4.host = "{{ ansible_host }}"
~d3.delegate_to = localhost
~d2.name = Installs python
~d3.raw = apt-get update && apt-get install -y python
~d2.name = Creates destination directory
~d3.file = 
~d4.state = directory
~d4.mode = 0700
~d4.dest = /root/.ssh/
~d2.name = Pushes user's rsa key to root's vagrant box (it's ok if this TASK fails)
~d3.copy = 
~d4.src = ~/.ssh/id_rsa.pub
~d4.dest = /root/.ssh/authorized_keys
~d4.owner = root
~d4.mode = 0600
~d3.register = rsa
~d3.ignore_errors = true
~d2.name = Pushes user's dsa key to root's vagrant box (it's ok if this TASK fails)
~d3.copy = 
~d4.src = ~/.ssh/id_dsa.pub
~d4.dest = /root/.ssh/authorized_keys
~d4.owner = root
~d4.mode = 0600
~d3.register = dsa
~d3.ignore_errors = true
~d3.when = rsa is failed
~d2.name = Pushes user's ed25519 key to root's vagrant box (it's NOT ok if all TASKs fail)
~d3.copy = 
~d4.src = ~/.ssh/id_ed25519.pub
~d4.dest = /root/.ssh/authorized_keys
~d4.owner = root
~d4.mode = 0600
~d3.when = dsa is failed
~d2.name = Checks if resolver is working properly (issues with some VBox/Host OS combinations)
~d3.command = host -t A ansible.cc
~d3.register = ns
~d3.ignore_errors = true
~d2.name = Pushes new resolver configuration if resolver fails
~d3.lineinfile = 
~d4.regexp = "^nameserver "
~d4.line = "nameserver 8.8.8.8"
~d4.dest = /etc/resolv.conf
~d3.when = ns is failed
~d2.name = Checks if resolver is working properly with new nameserver
~d3.command = host -t A ansible.cc
~d2.name = Final greeting
~d3.pause = 
~d4.seconds = 1
~d4.echo = false
~d4.prompt = "Don't worry about all the red above; if you made it here, your Vagrant VMs are probably fine !"
