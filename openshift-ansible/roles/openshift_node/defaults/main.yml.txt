openshift_node_machineconfigpool = worker
openshift_node_tls_verify = false
openshift_node_kubeconfig_path = {{ openshift_kubeconfig_path | default('~/.kube/config') | expanduser | realpath }}
openshift_node_kubeconfig = {{ lookup('file', openshift_node_kubeconfig_path) | from_yaml }}
openshift_node_bootstrap_port = 22623
openshift_node_bootstrap_server = {{ openshift_node_kubeconfig.clusters.0.cluster.server.split(':')[0:-1] | join(':') | regex_replace('://api-int|://api', '://api-int') }}:{{ openshift_node_bootstrap_port }}
openshift_node_bootstrap_endpoint = {{ openshift_node_bootstrap_server }}/config/{{ openshift_node_machineconfigpool }}
openshift_package_directory = /tmp/openshift-ansible-packages
openshift_packages = {{ (openshift_node_packages + openshift_node_support_packages) | join(',') }}
openshift_node_packages[0] = afterburn
openshift_node_packages[1] = conmon
openshift_node_packages[2] = cri-o-{{ crio_latest }}
openshift_node_packages[3] = cri-tools
openshift_node_packages[4] = crun
openshift_node_packages[5] = openshift-clients-{{ l_cluster_version }}*
openshift_node_packages[6] = openshift-kubelet-{{ l_cluster_version }}*
openshift_node_packages[7] = podman
openshift_node_packages[8] = netavark
openshift_node_packages[9] = runc
openshift_node_packages[10] = ose-aws-ecr-image-credential-provider
openshift_node_packages[11] = ose-azure-acr-image-credential-provider
openshift_node_packages[12] = ose-gcp-gcr-image-credential-provider
openshift_node_support_packages = {{
  openshift_node_support_packages_base +
  openshift_node_support_packages_by_os_major_version[ansible_distribution_major_version] +
  openshift_node_support_packages_by_arch[ansible_architecture] }}

openshift_node_support_packages_base[0] = kernel
openshift_node_support_packages_base[1] = systemd
openshift_node_support_packages_base[2] = selinux-policy-targeted
openshift_node_support_packages_base[3] = setools-console
openshift_node_support_packages_base[4] = dracut-network
openshift_node_support_packages_base[5] = passwd
openshift_node_support_packages_base[6] = openssh-server
openshift_node_support_packages_base[7] = openssh-clients
openshift_node_support_packages_base[8] = skopeo
openshift_node_support_packages_base[9] = containernetworking-plugins
openshift_node_support_packages_base[10] = nfs-utils
openshift_node_support_packages_base[11] = NetworkManager
openshift_node_support_packages_base[12] = NetworkManager-ovs
openshift_node_support_packages_base[13] = NetworkManager-libreswan
openshift_node_support_packages_base[14] = libreswan
openshift_node_support_packages_base[15] = dnsmasq
openshift_node_support_packages_base[16] = lvm2
openshift_node_support_packages_base[17] = iscsi-initiator-utils
openshift_node_support_packages_base[18] = sg3_utils
openshift_node_support_packages_base[19] = device-mapper-multipath
openshift_node_support_packages_base[20] = xfsprogs
openshift_node_support_packages_base[21] = e2fsprogs
openshift_node_support_packages_base[22] = mdadm
openshift_node_support_packages_base[23] = cryptsetup
openshift_node_support_packages_base[24] = chrony
openshift_node_support_packages_base[25] = logrotate
openshift_node_support_packages_base[26] = sssd
openshift_node_support_packages_base[27] = shadow-utils
openshift_node_support_packages_base[28] = sudo
openshift_node_support_packages_base[29] = coreutils
openshift_node_support_packages_base[30] = less
openshift_node_support_packages_base[31] = tar
openshift_node_support_packages_base[32] = xz
openshift_node_support_packages_base[33] = gzip
openshift_node_support_packages_base[34] = bzip2
openshift_node_support_packages_base[35] = rsync
openshift_node_support_packages_base[36] = tmux
openshift_node_support_packages_base[37] = nmap-ncat
openshift_node_support_packages_base[38] = net-tools
openshift_node_support_packages_base[39] = bind-utils
openshift_node_support_packages_base[40] = strace
openshift_node_support_packages_base[41] = bash-completion
openshift_node_support_packages_base[42] = vim-minimal
openshift_node_support_packages_base[43] = nano
openshift_node_support_packages_base[44] = authconfig
openshift_node_support_packages_base[45] = iptables-services
openshift_node_support_packages_base[46] = cifs-utils
openshift_node_support_packages_base[47] = jq
openshift_node_support_packages_base[48] = libseccomp
openshift_node_support_packages_by_os_major_version.7[0] = openvswitch2.13
openshift_node_support_packages_by_os_major_version.7[1] = policycoreutils-python
openshift_node_support_packages_by_os_major_version.7[2] = bridge-utils
openshift_node_support_packages_by_os_major_version.7[3] = container-storage-setup
openshift_node_support_packages_by_os_major_version.7[4] = ceph-common
openshift_node_support_packages_by_os_major_version.8[0] = openvswitch3.1
openshift_node_support_packages_by_os_major_version.8[1] = policycoreutils-python-utils
openshift_node_support_packages_by_os_major_version.9[0] = openvswitch3.1
openshift_node_support_packages_by_os_major_version.9[1] = policycoreutils-python-utils
openshift_node_support_packages_by_arch.ppc64le[0] = irqbalance
openshift_node_support_packages_by_arch.s390x[0] = s390utils-base
openshift_node_support_packages_by_arch.x86_64[0] = microcode_ctl
openshift_node_support_packages_by_arch.x86_64[1] = irqbalance
openshift_node_support_packages_by_arch.x86_64[2] = biosdevname
openshift_node_support_packages_by_arch.x86_64[3] = glusterfs-fuse
openshift_node_support_packages_by_arch.aarch64[0] = irqbalance
