~d0.name = Install required packages for phpipam-scripts
~d1.ansible.builtin.package = 
~d2.name = 'python-mysqldb'
~d2.state = 'present'
~d1.register = phpipam__register_packages
~d1.until = phpipam__register_packages is succeeded
~d0.name = Clone phpipam-scripts
~d1.ansible.builtin.git = 
~d2.repo = '{{ phpipam__scripts_git_repo }}'
~d2.dest = '{{ phpipam__scripts_git_dest }}'
~d2.version = '{{ phpipam__scripts_git_version }}'
~d2.update = True
~d1.register = phpipam__register_scripts_src
~d0.name = Install phpipam-scripts
~d1.ansible.builtin.command = 'make install'  # noqa no-handler
~d1.args = 
~d2.chdir = '{{ phpipam__scripts_git_dest }}'
~d1.register = phpipam__register_make_install
~d1.changed_when = phpipam__register_make_install.changed | bool
~d1.when = phpipam__register_scripts_src is defined and
~d0.name = Configure phpipam-scripts
~d1.ansible.builtin.template = 
~d2.src = 'etc/dhcp/phpipam.conf.j2'
~d2.dest = '/etc/dhcp/phpipam.conf'
~d2.owner = 'root'
~d2.group = 'root'
~d2.mode = '0600'
~d0.name = Configure phpipam-scripts-wrapper
~d1.ansible.builtin.template = 
~d2.src = 'usr/local/sbin/phpipam-hosts-wrapper.j2'
~d2.dest = '/usr/local/sbin/phpipam-hosts-wrapper'
~d2.owner = 'root'
~d2.group = 'root'
~d2.mode = '0755'
~d1.register = phpipam__register_hosts_wrapper
~d0.name = Create wrapper script entry in cron
~d1.ansible.builtin.cron = 
~d2.name = 'Regenerate DHCP hosts files'
~d2.cron_file = 'phpipam-scripts'
~d2.minute = '{{ phpipam__scripts_cron_period }}'
~d2.job = '/usr/local/sbin/phpipam-hosts-wrapper'
~d2.user = 'root'
~d2.state = 'present'
