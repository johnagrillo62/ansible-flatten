[0].name = Set vault_addr
[0].include_tasks = set_vault_addr.yml
[1].name = Load vault keys
[1].include_vars.file = {{ vault_file }}
[2].name = Get AWX admin password
[2].include_vars.file = {{ admin_password_file }}
[3].name = Create a HashiCorp Vault Credential
[3]["awx.awx.credential"].credential_type = HashiCorp Vault Secret Lookup
[3]["awx.awx.credential"].name = Vault Lookup Cred
[3]["awx.awx.credential"].organization = Default
[3]["awx.awx.credential"].controller_host = {{ awx_host }}
[3]["awx.awx.credential"].controller_username = admin
[3]["awx.awx.credential"].controller_password = {{ admin_password }}
[3]["awx.awx.credential"].validate_certs = false
[3]["awx.awx.credential"].inputs.api_version = v1
[3]["awx.awx.credential"].inputs.cacert = {{ lookup('ansible.builtin.file', '{{ vault_server_cert }}', errors='ignore') }}
[3]["awx.awx.credential"].inputs.default_auth_path = cert
[3]["awx.awx.credential"].inputs.kubernetes_role = 
[3]["awx.awx.credential"].inputs.namespace = 
[3]["awx.awx.credential"].inputs.client_cert_public = {{ lookup('ansible.builtin.file', '{{ vault_client_cert }}', errors='ignore') }}
[3]["awx.awx.credential"].inputs.client_cert_private = {{ lookup('ansible.builtin.file', '{{ vault_client_key }}', errors='ignore') }}
[3]["awx.awx.credential"].inputs.token = {{ Initial_Root_Token }}
[3]["awx.awx.credential"].inputs.url = {{ vault_addr_from_container }}
[3].register = vault_cred
[4].name = Create a custom credential type
[4]["awx.awx.credential_type"].name = Vault Custom Cred Type
[4]["awx.awx.credential_type"].kind = cloud
[4]["awx.awx.credential_type"].controller_host = {{ awx_host }}
[4]["awx.awx.credential_type"].controller_username = admin
[4]["awx.awx.credential_type"].controller_password = {{ admin_password }}
[4]["awx.awx.credential_type"].validate_certs = false
[4]["awx.awx.credential_type"].injectors.extra_vars.the_secret_from_vault = {{ '{{' }} password {{ '}}' }}
[4]["awx.awx.credential_type"].inputs.fields[0].type = string
[4]["awx.awx.credential_type"].inputs.fields[0].id = password
[4]["awx.awx.credential_type"].inputs.fields[0].label = Password
[4]["awx.awx.credential_type"].inputs.fields[0].secret = true
[4].register = custom_vault_cred_type
[5].name = Create a credential of the custom type for token auth
[5]["awx.awx.credential"].credential_type = {{ custom_vault_cred_type.id }}
[5]["awx.awx.credential"].controller_host = {{ awx_host }}
[5]["awx.awx.credential"].controller_username = admin
[5]["awx.awx.credential"].controller_password = {{ admin_password }}
[5]["awx.awx.credential"].validate_certs = false
[5]["awx.awx.credential"].name = Credential From HashiCorp Vault via Token Auth
[5]["awx.awx.credential"].organization = Default
[5].register = custom_credential_via_token
[6].name = Use the Token Vault Credential For the new credential
[6]["awx.awx.credential_input_source"].input_field_name = password
[6]["awx.awx.credential_input_source"].target_credential = {{ custom_credential_via_token.id }}
[6]["awx.awx.credential_input_source"].source_credential = {{ vault_cred.id }}
[6]["awx.awx.credential_input_source"].controller_host = {{ awx_host }}
[6]["awx.awx.credential_input_source"].controller_username = admin
[6]["awx.awx.credential_input_source"].controller_password = {{ admin_password }}
[6]["awx.awx.credential_input_source"].validate_certs = false
[6]["awx.awx.credential_input_source"].metadata.auth_path = 
[6]["awx.awx.credential_input_source"].metadata.secret_backend = my_engine
[6]["awx.awx.credential_input_source"].metadata.secret_key = my_key
[6]["awx.awx.credential_input_source"].metadata.secret_path = /my_root/my_folder
[6]["awx.awx.credential_input_source"].metadata.secret_version = 
[7].name = Create a HashiCorp Vault Credential for UserPass
[7]["awx.awx.credential"].credential_type = HashiCorp Vault Secret Lookup
[7]["awx.awx.credential"].name = Vault UserPass Lookup Cred
[7]["awx.awx.credential"].organization = Default
[7]["awx.awx.credential"].controller_host = {{ awx_host }}
[7]["awx.awx.credential"].controller_username = admin
[7]["awx.awx.credential"].controller_password = {{ admin_password }}
[7]["awx.awx.credential"].validate_certs = false
[7]["awx.awx.credential"].inputs.api_version = v1
[7]["awx.awx.credential"].inputs.default_auth_path = userpass
[7]["awx.awx.credential"].inputs.kubernetes_role = 
[7]["awx.awx.credential"].inputs.namespace = 
[7]["awx.awx.credential"].inputs.url = {{ vault_addr_from_container }}
[7]["awx.awx.credential"].inputs.username = {{ vault_userpass_username }}
[7]["awx.awx.credential"].inputs.password = {{ vault_userpass_password }}
[7].register = vault_userpass_cred
[8].name = Create a credential from the Vault UserPass Custom Cred Type
[8]["awx.awx.credential"].credential_type = {{ custom_vault_cred_type.id }}
[8]["awx.awx.credential"].controller_host = {{ awx_host }}
[8]["awx.awx.credential"].controller_username = admin
[8]["awx.awx.credential"].controller_password = {{ admin_password }}
[8]["awx.awx.credential"].validate_certs = false
[8]["awx.awx.credential"].name = Credential From HashiCorp Vault via UserPass Auth
[8]["awx.awx.credential"].organization = Default
[8].register = custom_credential_via_userpass
[9].name = Use the Vault UserPass Credential  the new credential
[9]["awx.awx.credential_input_source"].input_field_name = password
[9]["awx.awx.credential_input_source"].target_credential = {{ custom_credential_via_userpass.id }}
[9]["awx.awx.credential_input_source"].source_credential = {{ vault_userpass_cred.id }}
[9]["awx.awx.credential_input_source"].controller_host = {{ awx_host }}
[9]["awx.awx.credential_input_source"].controller_username = admin
[9]["awx.awx.credential_input_source"].controller_password = {{ admin_password }}
[9]["awx.awx.credential_input_source"].validate_certs = false
[9]["awx.awx.credential_input_source"].metadata.auth_path = 
[9]["awx.awx.credential_input_source"].metadata.secret_backend = userpass_engine
[9]["awx.awx.credential_input_source"].metadata.secret_key = my_key
[9]["awx.awx.credential_input_source"].metadata.secret_path = userpass_root/userpass_secret
[9]["awx.awx.credential_input_source"].metadata.secret_version = 
