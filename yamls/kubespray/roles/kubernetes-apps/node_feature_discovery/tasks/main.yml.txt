[0].name = Node Feature Discovery | Create addon dir
[0].file.path = {{ kube_config_dir }}/addons/node_feature_discovery
[0].file.state = directory
[0].file.owner = root
[0].file.group = root
[0].file.mode = 0755
[0].when[0] = inventory_hostname == groups['kube_control_plane'][0]
[1].name = Node Feature Discovery | Templates list
[1].set_fact.node_feature_discovery_templates[0].name = nfd-ns
[1].set_fact.node_feature_discovery_templates[0].file = nfd-ns.yaml
[1].set_fact.node_feature_discovery_templates[0].type = ns
[1].set_fact.node_feature_discovery_templates[1].name = nfd-api-crd
[1].set_fact.node_feature_discovery_templates[1].file = nfd-api-crds.yaml
[1].set_fact.node_feature_discovery_templates[1].type = crd
[1].set_fact.node_feature_discovery_templates[2].name = nfd-serviceaccount
[1].set_fact.node_feature_discovery_templates[2].file = nfd-serviceaccount.yaml
[1].set_fact.node_feature_discovery_templates[2].type = sa
[1].set_fact.node_feature_discovery_templates[3].name = nfd-role
[1].set_fact.node_feature_discovery_templates[3].file = nfd-role.yaml
[1].set_fact.node_feature_discovery_templates[3].type = role
[1].set_fact.node_feature_discovery_templates[4].name = nfd-clusterrole
[1].set_fact.node_feature_discovery_templates[4].file = nfd-clusterrole.yaml
[1].set_fact.node_feature_discovery_templates[4].type = clusterrole
[1].set_fact.node_feature_discovery_templates[5].name = nfd-rolebinding
[1].set_fact.node_feature_discovery_templates[5].file = nfd-rolebinding.yaml
[1].set_fact.node_feature_discovery_templates[5].type = rolebinding
[1].set_fact.node_feature_discovery_templates[6].name = nfd-clusterrolebinding
[1].set_fact.node_feature_discovery_templates[6].file = nfd-clusterrolebinding.yaml
[1].set_fact.node_feature_discovery_templates[6].type = clusterrolebinding
[1].set_fact.node_feature_discovery_templates[7].name = nfd-master-conf
[1].set_fact.node_feature_discovery_templates[7].file = nfd-master-conf.yaml
[1].set_fact.node_feature_discovery_templates[7].type = cm
[1].set_fact.node_feature_discovery_templates[8].name = nfd-worker-conf
[1].set_fact.node_feature_discovery_templates[8].file = nfd-worker-conf.yaml
[1].set_fact.node_feature_discovery_templates[8].type = cm
[1].set_fact.node_feature_discovery_templates[9].name = nfd-topologyupdater-conf
[1].set_fact.node_feature_discovery_templates[9].file = nfd-topologyupdater-conf.yaml
[1].set_fact.node_feature_discovery_templates[9].type = cm
[1].set_fact.node_feature_discovery_templates[10].name = nfd-gc
[1].set_fact.node_feature_discovery_templates[10].file = nfd-gc.yaml
[1].set_fact.node_feature_discovery_templates[10].type = deploy
[1].set_fact.node_feature_discovery_templates[11].name = nfd-master
[1].set_fact.node_feature_discovery_templates[11].file = nfd-master.yaml
[1].set_fact.node_feature_discovery_templates[11].type = deploy
[1].set_fact.node_feature_discovery_templates[12].name = nfd-worker
[1].set_fact.node_feature_discovery_templates[12].file = nfd-worker.yaml
[1].set_fact.node_feature_discovery_templates[12].type = ds
[1].set_fact.node_feature_discovery_templates[13].name = nfd-service
[1].set_fact.node_feature_discovery_templates[13].file = nfd-service.yaml
[1].set_fact.node_feature_discovery_templates[13].type = srv
[2].name = Node Feature Discovery | Create manifests
[2].template.src = {{ item.file }}.j2
[2].template.dest = {{ kube_config_dir }}/addons/node_feature_discovery/{{ item.file }}
[2].template.mode = 0644
[2].with_items = {{ node_feature_discovery_templates }}
[2].register = node_feature_discovery_manifests
[2].when[0] = inventory_hostname == groups['kube_control_plane'][0]
[3].name = Node Feature Discovery | Apply manifests
[3].kube.name = {{ item.item.name }}
[3].kube.kubectl = {{ bin_dir }}/kubectl
[3].kube.resource = {{ item.item.type }}
[3].kube.filename = {{ kube_config_dir }}/addons/node_feature_discovery/{{ item.item.file }}
[3].kube.state = latest
[3].with_items = {{ node_feature_discovery_manifests.results }}
[3].when[0] = inventory_hostname == groups['kube_control_plane'][0]
