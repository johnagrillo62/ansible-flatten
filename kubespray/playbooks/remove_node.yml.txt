~d0.name = Validate nodes for removal
~d1.hosts = localhost
~d1.gather_facts = false
~d1.become = false
~d1.tasks = 
~d2.name = Assert that nodes are specified for removal
~d3.assert = 
~d4.that = 
~d4.msg = "No nodes specified for removal. The `node` variable must be set explicitly."
~d0.name = Common tasks for every playbooks
~d1.import_playbook = boilerplate.yml
~d0.name = Confirm node removal
~d1.hosts = "{{ node | default('this_is_unreachable') }}"
~d1.gather_facts = false
~d1.tasks = 
~d2.name = Confirm Execution
~d3.pause = 
~d4.prompt = "Are you sure you want to delete nodes state? Type 'yes' to delete nodes."
~d3.register = pause_result
~d3.run_once = true
~d3.when = 
~d2.name = Fail if user does not confirm deletion
~d3.fail = 
~d4.msg = "Delete nodes confirmation failed"
~d3.when = pause_result.user_input | default('yes') != 'yes'
~d0.name = Gather facts
~d1.import_playbook = internal_facts.yml
~d1.when = reset_nodes | default(True) | bool
~d0.name = Reset node
~d1.hosts = "{{ node | default('this_is_unreachable') }}"
~d1.gather_facts = false
~d1.environment = "{{ proxy_disable_env }}"
~d1.pre_tasks = 
~d2.name = Gather information about installed services
~d3.service_facts = 
~d3.when = reset_nodes | default(True) | bool
~d1.roles = 
~d2.{ role = kubespray_defaults, when: reset_nodes | default(True) | bool }
~d2.{ role = remove_node/pre_remove, tags: pre-remove }
~d2.role = remove-node/remove-etcd-node
~d3.when = "'etcd' in group_names"
~d2.{ role = reset, tags: reset, when: reset_nodes | default(True) | bool }
~d0.name = Post node removal
~d1.hosts = "{{ node | default('this_is_unreachable') }}"
~d1.gather_facts = false
~d1.environment = "{{ proxy_disable_env }}"
~d1.roles = 
~d2.{ role = kubespray_defaults, when: reset_nodes | default(True) | bool }
~d2.{ role = remove-node/post-remove, tags: post-remove }
