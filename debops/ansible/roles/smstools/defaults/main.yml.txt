smstools_mail_transport_subdomain = sms
smstools_mail_alias_subdomain = gsm
smstools_mail_domain = {{ ansible_domain }}
smstools_mail_transport_domain = {{ smstools_mail_transport_subdomain }}.{{ smstools_mail_domain }}
smstools_mail_alias_domain = {{ smstools_mail_alias_subdomain }}.{{ smstools_mail_domain }}
smstools_default_country_prefix = 
smstools_default_senders[0].name = root@{{ smstools_mail_domain }}
smstools_sms_log = /var/log/sms.log
smstools_sms_log_rotation = monthly
smstools_sms_log_rotation_interval = {{ (12 * 2) }}
smstools_test_message = This is a test of the SMS gateway on {{ ansible_fqdn }} sent at $(date)
smstools_sleep = 1
smstools_stats_interval = {{ (60 * 60 * 24) | round | int }}
smstools_global_options.delaytime = {{ smstools_sleep }}
smstools_global_options.delaytime_mainprocess = {{ smstools_sleep }}
smstools_global_options.receive_before_send = no
smstools_global_options.autosplit = 3
smstools_global_options.loglevel = 5
smstools_devices[0].name = GSM1
smstools_devices[0].device = /dev/ttyS0
smstools_devices[0].options.baudrate = 115200
smstools_devices[0].options.incoming = yes
smstools__etc_services__dependent_list[0].name = {{ smstools_service_name }}
smstools__etc_services__dependent_list[0].port = {{ smstools_service_port }}
smstools__etc_services__dependent_list[0].comment = SMS service
smstools__tcpwrappers__dependent_allow[0].daemon = {{ smstools_service_name }}
smstools__tcpwrappers__dependent_allow[0].client = {{ smstools_service_allow }}
smstools__tcpwrappers__dependent_allow[0].weight = 50
smstools__tcpwrappers__dependent_allow[0].filename = smstools_dependency_allow
smstools__tcpwrappers__dependent_allow[0].comment = Allow connections to SMS service
smstools__ferm__dependent_rules[0].name = smstools_accept
smstools__ferm__dependent_rules[0].type = accept
smstools__ferm__dependent_rules[0].dport[0] = {{ smstools_service_name }}
smstools__ferm__dependent_rules[0].saddr = {{ smstools_service_allow }}
smstools__postfix__dependent_maincf[0].name = recipient_canonical_maps
smstools__postfix__dependent_maincf[0].value[0] = texthash:/usr/local/lib/smstools/postfix_recipient_canonical_map
smstools__postfix__dependent_maincf[1].name = transport_maps
smstools__postfix__dependent_maincf[1].value[0] = texthash:/usr/local/lib/smstools/postfix_transport
smstools__postfix__dependent_maincf[2].name = relay_domains
smstools__postfix__dependent_maincf[2].value[0] = {{ smstools_mail_transport_domain }}
smstools__postfix__dependent_maincf[3].name = relay_recipient_maps
smstools__postfix__dependent_maincf[3].value[0] = regexp:/usr/local/lib/smstools/postfix_relay_recipient_map
smstools__postfix__dependent_maincf[4].name = virtual_alias_domains
smstools__postfix__dependent_maincf[4].value[0] = {{ smstools_mail_alias_domain }}
smstools__postfix__dependent_maincf[5].name = virtual_alias_maps
smstools__postfix__dependent_maincf[5].value[0] = texthash:/usr/local/lib/smstools/postfix_virtual_alias_map
smstools__postfix__dependent_maincf[6].name = sms_destination_recipient_limit
smstools__postfix__dependent_maincf[6].value = 1
smstools__postfix__dependent_mastercf[0].name = sms
smstools__postfix__dependent_mastercf[0].type = unix
smstools__postfix__dependent_mastercf[0].unpriv = False
smstools__postfix__dependent_mastercf[0].chroot = False
smstools__postfix__dependent_mastercf[0].maxproc = 1
smstools__postfix__dependent_mastercf[0].args = flags=hqu user=smsd argv=/usr/local/lib/smstools/sms-transport
${sender} ${mailbox}

smstools__postfix__dependent_mastercf[0].command = pipe
