[0].name = Generate a test ID
[0].set_fact.test_id = {{ lookup('password', '/dev/null chars=ascii_letters length=16') }}
[0].when = test_id is not defined
[1].name = Generate names
[1].set_fact.cred_type_name = AWX-Collection-tests-credential_type-cred-type-{{ test_id }}
[2].block[0].name = Add Tower credential type
[2].block[0].credential_type.description = Credential type for Test
[2].block[0].credential_type.name = {{ cred_type_name }}
[2].block[0].credential_type.kind = cloud
[2].block[0].credential_type.inputs.fields[0].type = string
[2].block[0].credential_type.inputs.fields[0].id = username
[2].block[0].credential_type.inputs.fields[0].label = Username
[2].block[0].credential_type.inputs.fields[1].secret = true
[2].block[0].credential_type.inputs.fields[1].type = string
[2].block[0].credential_type.inputs.fields[1].id = password
[2].block[0].credential_type.inputs.fields[1].label = Password
[2].block[0].credential_type.inputs.required[0] = username
[2].block[0].credential_type.inputs.required[1] = password
[2].block[0].credential_type.injectors.extra_vars.test = foo
[2].block[0].register = result
[2].block[1].assert.that[0] = result is changed
[2].block[2].name = Add Tower credential type with exists
[2].block[2].credential_type.description = Credential type for Test
[2].block[2].credential_type.name = {{ cred_type_name }}
[2].block[2].credential_type.kind = cloud
[2].block[2].credential_type.inputs.fields[0].type = string
[2].block[2].credential_type.inputs.fields[0].id = username
[2].block[2].credential_type.inputs.fields[0].label = Username
[2].block[2].credential_type.inputs.fields[1].secret = true
[2].block[2].credential_type.inputs.fields[1].type = string
[2].block[2].credential_type.inputs.fields[1].id = password
[2].block[2].credential_type.inputs.fields[1].label = Password
[2].block[2].credential_type.inputs.required[0] = username
[2].block[2].credential_type.inputs.required[1] = password
[2].block[2].credential_type.injectors.extra_vars.test = foo
[2].block[2].credential_type.state = exists
[2].block[2].register = result
[2].block[3].assert.that[0] = result is not changed
[2].block[4].name = Delete the credential type
[2].block[4].credential_type.description = Credential type for Test
[2].block[4].credential_type.name = {{ cred_type_name }}
[2].block[4].credential_type.kind = cloud
[2].block[4].credential_type.inputs.fields[0].type = string
[2].block[4].credential_type.inputs.fields[0].id = username
[2].block[4].credential_type.inputs.fields[0].label = Username
[2].block[4].credential_type.inputs.fields[1].secret = true
[2].block[4].credential_type.inputs.fields[1].type = string
[2].block[4].credential_type.inputs.fields[1].id = password
[2].block[4].credential_type.inputs.fields[1].label = Password
[2].block[4].credential_type.inputs.required[0] = username
[2].block[4].credential_type.inputs.required[1] = password
[2].block[4].credential_type.injectors.extra_vars.test = foo
[2].block[4].credential_type.state = absent
[2].block[4].register = result
[2].block[5].assert.that[0] = result is changed
[2].block[6].name = Add Tower credential type with exists
[2].block[6].credential_type.description = Credential type for Test
[2].block[6].credential_type.name = {{ cred_type_name }}
[2].block[6].credential_type.kind = cloud
[2].block[6].credential_type.inputs.fields[0].type = string
[2].block[6].credential_type.inputs.fields[0].id = username
[2].block[6].credential_type.inputs.fields[0].label = Username
[2].block[6].credential_type.inputs.fields[1].secret = true
[2].block[6].credential_type.inputs.fields[1].type = string
[2].block[6].credential_type.inputs.fields[1].id = password
[2].block[6].credential_type.inputs.fields[1].label = Password
[2].block[6].credential_type.inputs.required[0] = username
[2].block[6].credential_type.inputs.required[1] = password
[2].block[6].credential_type.injectors.extra_vars.test = foo
[2].block[6].credential_type.state = exists
[2].block[6].register = result
[2].block[7].assert.that[0] = result is changed
[2].block[8].name = Rename Tower credential type
[2].block[8].credential_type.name = {{ cred_type_name }}
[2].block[8].credential_type.new_name = {{ cred_type_name }}a
[2].block[8].credential_type.kind = cloud
[2].block[8].register = result
[2].block[9].assert.that[0] = result is changed
[2].always[0].name = Remove a Tower credential type
[2].always[0].credential_type.name = {{ item }}
[2].always[0].credential_type.state = absent
[2].always[0].register = result
[2].always[0].loop[0] = {{ cred_type_name }}
[2].always[0].loop[1] = {{ cred_type_name }}a
[2].always[1].assert.that[0] = result is changed
