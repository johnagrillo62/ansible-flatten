[0].name = Import custom Ansible plugins
[0]["ansible.builtin.import_role"].name = ansible_plugins
[1].name = Import DebOps global handlers
[1]["ansible.builtin.import_role"].name = global_handlers
[2].name = Install MiniDLNA packages
[2]["ansible.builtin.apt"].name = {{ (minidlna__base_packages + minidlna__packages) | flatten }}
[2]["ansible.builtin.apt"].state = present
[2].register = minidlna__register_packages
[2].until = minidlna__register_packages is succeeded
[3].name = Divert the MiniDLNA configuration file
[3]["debops.debops.dpkg_divert"].path = /etc/minidlna.conf
[4].name = Generate MiniDLNA configuration file
[4]["ansible.builtin.template"].src = etc/minidlna.conf.j2
[4]["ansible.builtin.template"].dest = /etc/minidlna.conf
[4]["ansible.builtin.template"].owner = root
[4]["ansible.builtin.template"].group = root
[4]["ansible.builtin.template"].mode = 0644
[4]["ansible.builtin.template"].unsafe_writes = {{ True if (core__unsafe_writes | d(ansible_local.core.unsafe_writes | d()) | bool) else omit }}
[4].register = minidlna__register_configuration
[5].name = Conditionally restart MiniDLNA service
[5]["ansible.builtin.systemd"].name = minidlna.service
[5]["ansible.builtin.systemd"].enabled = true
[5]["ansible.builtin.systemd"].daemon_reload = {{ True if (minidlna__register_configuration is changed) else omit }}
[5]["ansible.builtin.systemd"].state = {{ "restarted" if (minidlna__register_configuration is changed) else "started" }}
[5].when = ansible_service_mgr == 'systemd'
[6].name = Make sure that Ansible local fact directory exists
[6]["ansible.builtin.file"].path = /etc/ansible/facts.d
[6]["ansible.builtin.file"].state = directory
[6]["ansible.builtin.file"].owner = root
[6]["ansible.builtin.file"].group = root
[6]["ansible.builtin.file"].mode = 0755
[7].name = Create local facts of MiniDLNA
[7]["ansible.builtin.template"].src = etc/ansible/facts.d/minidlna.fact.j2
[7]["ansible.builtin.template"].dest = /etc/ansible/facts.d/minidlna.fact
[7]["ansible.builtin.template"].owner = root
[7]["ansible.builtin.template"].group = root
[7]["ansible.builtin.template"].mode = 0755
[7]["ansible.builtin.template"].unsafe_writes = {{ True if (core__unsafe_writes | d(ansible_local.core.unsafe_writes | d()) | bool) else omit }}
[7].notify[0] = Refresh host facts
[7].tags[0] = meta::facts
[8].name = Reload facts if they were modified
[8]["ansible.builtin.meta"] = flush_handlers
