mariadb_server__flavor = {{ ansible_local.mariadb.flavor | d("mariadb") }}
mariadb_server__apt_key = {{ mariadb_server__apt_key_map[mariadb_server__flavor] | d() }}
mariadb_server__apt_key_map.mariadb_upstream[0].id = 199369E5404BD5FC7D2FE43BCBCB082A1BB943DB
mariadb_server__apt_key_map.mariadb_upstream[1].id = 177F4010FE56CA3336300305F1656F24C74CD1D8
mariadb_server__apt_key_map.mariadb_upstream[2].repo = deb {{ mariadb_server__upstream_mirror }} {{ ansible_distribution_release }} main
mariadb_server__apt_key_map["mysql-5.6_galera-3"][0].id = 44B7345738EBDE52594DAD80D669017EBC19DDBA
mariadb_server__apt_key_map["mysql-5.6_galera-3"][1].repo = deb http://releases.galeracluster.com/mysql-wsrep-5.6/{{ ansible_distribution | lower }} {{ ansible_distribution_release }} main
mariadb_server__apt_key_map["mysql-5.6_galera-3"][2].repo = deb http://releases.galeracluster.com/galera-3/{{ ansible_distribution | lower }} {{ ansible_distribution_release }} main
mariadb_server__apt_key_map["mysql-5.7_galera-3"][0].id = 44B7345738EBDE52594DAD80D669017EBC19DDBA
mariadb_server__apt_key_map["mysql-5.7_galera-3"][1].repo = deb http://releases.galeracluster.com/mysql-wsrep-5.7/{{ ansible_distribution | lower }} {{ ansible_distribution_release }} main
mariadb_server__apt_key_map["mysql-5.7_galera-3"][2].repo = deb http://releases.galeracluster.com/galera-3/{{ ansible_distribution | lower }} {{ ansible_distribution_release }} main
mariadb_server__apt_key_map["percona-8.0"][0].id = 4D1BB29D63D98E422B2113B19334A25F8507EFA5
mariadb_server__apt_key_map["percona-8.0"][1].repo = deb http://repo.percona.com/tools/apt {{ ansible_distribution_release }} main
mariadb_server__apt_key_map["percona-8.0"][2].repo = deb http://repo.percona.com/ps-80/apt {{ ansible_distribution_release }} main
mariadb_server__apt_key_map["percona-5.7"][0].id = 4D1BB29D63D98E422B2113B19334A25F8507EFA5
mariadb_server__apt_key_map["percona-5.7"][1].repo = deb http://repo.percona.com/tools/apt {{ ansible_distribution_release }} main
mariadb_server__apt_key_map["percona-5.7"][2].repo = deb http://repo.percona.com/ps-57/apt {{ ansible_distribution_release }} main
mariadb_server__upstream_version = 10.1
mariadb_server__upstream_mirror = http://nyc2.mirrors.digitalocean.com/mariadb/repo/{{ mariadb_server__upstream_version }}/{{ ansible_distribution | lower }}
mariadb_server__base_packages[0] = ssl-cert
mariadb_server__packages_map.mariadb[0] = mariadb-server
mariadb_server__packages_map.mariadb_upstream[0] = mariadb-server
mariadb_server__packages_map.mysql[0] = mysql-server
mariadb_server__packages_map["mysql-5.6_galera-3"][0] = mysql-wsrep-server-5.6
mariadb_server__packages_map["mysql-5.6_galera-3"][1] = galera-3
mariadb_server__packages_map["mysql-5.6_galera-3"][2] = galera-arbitrator-3
mariadb_server__packages_map["mysql-5.7_galera-3"][0] = mysql-wsrep-server-5.7
mariadb_server__packages_map["mysql-5.7_galera-3"][1] = galera-3
mariadb_server__packages_map["mysql-5.7_galera-3"][2] = galera-arbitrator-3
mariadb_server__packages_map["percona-8.0"][0] = percona-server-server
mariadb_server__packages_map["percona-5.7"][0] = percona-server-server-5.7
mariadb_server__bind_address = localhost
mariadb_server__port = 3306
mariadb_server__max_connections = 100
mariadb_server__default_datadir = /var/lib/mysql
mariadb_server__datadir = {{ mariadb_server__default_datadir }}
mariadb_server__delegate_to = {{ inventory_hostname }}
mariadb_server__mysqld_performance_options.innodb_buffer_pool_instances = {{ ansible_processor_vcpus | d(1) }}
mariadb_server__mysqld_performance_options.innodb_buffer_pool_size = {{ (ansible_memtotal_mb / 2) | int }}M
mariadb_server__mysqld_performance_options.query_cache_type = 0
mariadb_server__local_infile = False
mariadb_server__mysqld_security_options.local_infile = {{ "1" if mariadb_server__local_infile | bool else "0" }}
mariadb_server__mysqld_charset_options.character_set_server = utf8mb4
mariadb_server__mysqld_charset_options.collation_server = utf8mb4_general_ci
mariadb_server__mysqld_charset_options.init_connect = SET NAMES utf8mb4
mariadb_server__mysqld_network_options.bind_address = {{ mariadb_server__bind_address }}
mariadb_server__mysqld_network_options.port = {{ mariadb_server__port }}
mariadb_server__mysqld_network_options.max_connections = {{ mariadb_server__max_connections }}
mariadb_server__mysqld_pki_options.name = pki-options
mariadb_server__mysqld_pki_options.comment = Support for SSL connections
mariadb_server__mysqld_pki_options.state = {{ "present" if mariadb_server__pki | bool else "absent" }}
mariadb_server__mysqld_pki_options.options.ssl = null
mariadb_server__mysqld_pki_options.options.ssl_ca = {{ mariadb_server__pki_path + "/" + mariadb_server__pki_realm + "/" + mariadb_server__pki_ca }}
mariadb_server__mysqld_pki_options.options.ssl_cert = {{ mariadb_server__pki_path + "/" + mariadb_server__pki_realm + "/" + mariadb_server__pki_crt }}
mariadb_server__mysqld_pki_options.options.ssl_key = {{ mariadb_server__pki_path + "/" + mariadb_server__pki_realm + "/" + mariadb_server__pki_key }}
mariadb_server__mysqld_pki_options.options.ssl_cipher = {{ mariadb_server__pki_cipher }}
mariadb_server__mysqld_cluster_options.name = cluster-options
mariadb_server__mysqld_cluster_options.comment = Required for cluster operation
mariadb_server__mysqld_cluster_options.state = {{ "present" if mariadb_server__flavor in ["mysql-5.6_galera-3", "percona", "percona-5.7"] else "absent" }}
mariadb_server__mysqld_cluster_options.options.binlog_format = ROW
mariadb_server__mysqld_cluster_options.options.default_storage_engine = InnoDB
mariadb_server__mysqld_cluster_options.options.innodb_autoinc_lock_mode = 2
mariadb_server__mysqld_directory_options.datadir = {{ mariadb_server__datadir }}
mariadb_server__mysqld_options[0].section = mysqld
mariadb_server__mysqld_options[0].options[0] = {{ mariadb_server__mysqld_performance_options }}
mariadb_server__mysqld_options[0].options[1] = {{ mariadb_server__mysqld_charset_options }}
mariadb_server__mysqld_options[0].options[2] = {{ mariadb_server__mysqld_security_options }}
mariadb_server__mysqld_options[0].options[3] = {{ mariadb_server__mysqld_network_options }}
mariadb_server__mysqld_options[0].options[4] = {{ mariadb_server__mysqld_pki_options }}
mariadb_server__mysqld_options[0].options[5] = {{ mariadb_server__mysqld_cluster_options }}
mariadb_server__mysqld_options[0].options[6] = {{ mariadb_server__mysqld_directory_options }}
mariadb_server__mysqld_options[0].options[7] = {{ mariadb_server__options }}
mariadb_server__client_options[0].section = client
mariadb_server__client_options[0].options.default_character_set = utf8mb4
mariadb_server__client_cnf_file = {{ "/etc/mysql/mariadb.conf.d/90-client.cnf"
                                     if (mariadb_server__register_confd.stat.exists | bool)
                                     else "/etc/mysql/conf.d/zz-client.cnf" }}
mariadb_server__mysqld_cnf_file = {{ "/etc/mysql/mariadb.conf.d/90-mysqld.cnf"
                                     if (mariadb_server__register_confd.stat.exists | bool)
                                     else "/etc/mysql/conf.d/zz-mysqld.cnf" }}
mariadb_server__append_groups[0] = ssl-cert
mariadb_server__pki = {{ (True
                      if (ansible_local.pki.enabled | d() and
                          mariadb_server__pki_realm in ansible_local.pki.known_realms)
                      else False) | bool }}
mariadb_server__pki_path = {{ ansible_local.pki.base_path | d("/etc/pki") }}
mariadb_server__pki_realm = {{ ansible_local.pki.realm | d("domain") }}
mariadb_server__pki_ca = CA.crt
mariadb_server__pki_crt = default.crt
mariadb_server__pki_key = default.key
mariadb_server__pki_cipher = DHE-RSA-AES256-SHA
mariadb_server__backup = True
mariadb_server__backup_mailaddr = backup
mariadb_server__backup_create_database = True
mariadb_server__backup_doweekly = 6
mariadb_server__backup_latest = no
mariadb_server__backup_directory = /var/lib/automysqlbackup
mariadb_server__backup_max_allowed_packet = 
mariadb_server__keyring__dependent_apt_keys[0] = {{ mariadb_server__apt_key }}
mariadb_server__etc_services__dependent_rules[0].name = galera-cluster-rep
mariadb_server__etc_services__dependent_rules[0].port = 4567
mariadb_server__etc_services__dependent_rules[0].protocols[0] = tcp
mariadb_server__etc_services__dependent_rules[0].protocols[1] = udp
mariadb_server__etc_services__dependent_rules[0].comment = Galera Cluster Replication
mariadb_server__etc_services__dependent_rules[1].name = galera-ist
mariadb_server__etc_services__dependent_rules[1].port = 4568
mariadb_server__etc_services__dependent_rules[1].protocols[0] = tcp
mariadb_server__etc_services__dependent_rules[1].comment = Galera Incremental State Transfer
mariadb_server__etc_services__dependent_rules[2].name = galera-sst
mariadb_server__etc_services__dependent_rules[2].port = 4444
mariadb_server__etc_services__dependent_rules[2].protocols[0] = tcp
mariadb_server__etc_services__dependent_rules[2].comment = Galera State Snapshot Transfer
mariadb_server__ferm__dependent_rules[0].type = accept
mariadb_server__ferm__dependent_rules[0].dport[0] = mysql
mariadb_server__ferm__dependent_rules[0].saddr = {{ mariadb_server__allow }}
mariadb_server__ferm__dependent_rules[0].accept_any = False
mariadb_server__ferm__dependent_rules[0].weight = 50
mariadb_server__ferm__dependent_rules[0].role = mariadb_server
mariadb_server__tcpwrappers__dependent_allow[0].daemon = mysqld
mariadb_server__tcpwrappers__dependent_allow[0].client = {{ mariadb_server__allow }}
mariadb_server__tcpwrappers__dependent_allow[0].accept_any = False
mariadb_server__tcpwrappers__dependent_allow[0].weight = 50
mariadb_server__tcpwrappers__dependent_allow[0].filename = mariadb_server_allow
mariadb_server__tcpwrappers__dependent_allow[0].comment = Allow remote connections to MariaDB / MySQL server
mariadb_server__python__dependent_packages3[0] = python3-mysqldb
mariadb_server__python__dependent_packages2[0] = python-mysqldb
