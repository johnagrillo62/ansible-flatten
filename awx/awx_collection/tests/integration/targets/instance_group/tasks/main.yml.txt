[0].name = Generate test id
[0].set_fact.test_id = {{ lookup('password', '/dev/null chars=ascii_letters length=16') }}
[0].when = test_id is not defined
[1].name = Generate names
[1].set_fact.group_name1 = AWX-Collection-tests-instance_group-group1-{{ test_id }}
[1].set_fact.group_name2 = AWX-Collection-tests-instance_group-group2-{{ test_id }}
[1].set_fact.cred_name1 = AWX-Collection-tests-instance_group-cred1-{{ test_id }}
[2].block[0].name = Create an OpenShift Credential
[2].block[0].credential.name = {{ cred_name1 }}
[2].block[0].credential.organization = Default
[2].block[0].credential.credential_type = OpenShift or Kubernetes API Bearer Token
[2].block[0].credential.inputs.host = https://openshift.org
[2].block[0].credential.inputs.bearer_token = asdf1234
[2].block[0].credential.inputs.verify_ssl = false
[2].block[0].register = cred_result
[2].block[1].assert.that[0] = cred_result is changed
[2].block[2].name = Create an Instance Group
[2].block[2].instance_group.name = {{ group_name1 }}
[2].block[2].instance_group.policy_instance_percentage = 34
[2].block[2].instance_group.policy_instance_minimum = 12
[2].block[2].instance_group.state = present
[2].block[2].register = result
[2].block[3].assert.that[0] = result is changed
[2].block[4].name = Create an Instance Group with exists
[2].block[4].instance_group.name = {{ group_name1 }}
[2].block[4].instance_group.policy_instance_percentage = 34
[2].block[4].instance_group.policy_instance_minimum = 12
[2].block[4].instance_group.state = exists
[2].block[4].register = result
[2].block[5].assert.that[0] = result is not changed
[2].block[6].name = Delete an Instance Group
[2].block[6].instance_group.name = {{ group_name1 }}
[2].block[6].instance_group.policy_instance_percentage = 34
[2].block[6].instance_group.policy_instance_minimum = 12
[2].block[6].instance_group.state = absent
[2].block[6].register = result
[2].block[7].assert.that[0] = result is changed
[2].block[8].name = Create an Instance Group with exists
[2].block[8].instance_group.name = {{ group_name1 }}
[2].block[8].instance_group.policy_instance_percentage = 34
[2].block[8].instance_group.policy_instance_minimum = 12
[2].block[8].instance_group.state = exists
[2].block[8].register = result
[2].block[9].assert.that[0] = result is changed
[2].block[10].name = Update an Instance Group
[2].block[10].instance_group.name = {{ result.id }}
[2].block[10].instance_group.policy_instance_percentage = 34
[2].block[10].instance_group.policy_instance_minimum = 24
[2].block[10].instance_group.state = present
[2].block[10].register = result
[2].block[11].assert.that[0] = result is changed
[2].block[12].name = Create a container group
[2].block[12].instance_group.name = {{ group_name2 }}
[2].block[12].instance_group.credential = {{ cred_result.id }}
[2].block[12].instance_group.is_container_group = true
[2].block[12].register = result
[2].block[13].assert.that[0] = result is changed
[2].always[0].name = Delete the instance groups
[2].always[0].instance_group.name = {{ item }}
[2].always[0].instance_group.state = absent
[2].always[0].loop[0] = {{ group_name1 }}
[2].always[0].loop[1] = {{ group_name2 }}
[2].always[1].name = Delete the credential
[2].always[1].credential.name = {{ cred_name1 }}
[2].always[1].credential.organization = Default
[2].always[1].credential.credential_type = OpenShift or Kubernetes API Bearer Token
