~d0.name = Generate a random string for test
~d1.set_fact = 
~d2.test_id = "{{ lookup('password', '/dev/null chars=ascii_letters length=16') }}"
~d1.when = test_id is not defined
~d0.name = Generate names
~d1.set_fact = 
~d2.org_name1 = "AWX-Collection-tests-export-organization-{{ test_id }}"
~d2.org_name2 = "AWX-Collection-tests-export-organization2-{{ test_id }}"
~d2.inventory_name1 = "AWX-Collection-tests-export-inv1-{{ test_id }}"
~d0.block = 
~d2.name = Create some organizations
~d3.organization = 
~d4.name = "{{ item }}"
~d3.loop = 
~d2.name = Create an inventory
~d3.inventory = 
~d4.name = "{{ inventory_name1 }}"
~d4.organization = "{{ org_name1 }}"
~d2.name = Export all assets
~d3.export = 
~d4.all = true
~d3.register = all_assets
~d2.assert = 
~d4.that = 
~d2.name = Export all inventories
~d3.export = 
~d4.inventory = 'all'
~d3.register = inventory_export
~d2.assert = 
~d4.that = 
~d2.name = Export an all and a specific
~d3.export = 
~d4.inventory = 'all'
~d4.organizations = "{{ org_name1 }}"
~d3.register = mixed_export
~d2.assert = 
~d4.that = 
~d2.name = Export list of organizations
~d3.export = 
~d4.organizations = "{{[org_name1, org_name2]}}"
~d3.register = list_asserts
~d2.assert = 
~d4.that = 
~d2.name = Export list with one organization
~d3.export = 
~d4.organizations = "{{[org_name1]}}"
~d3.register = list_asserts
~d2.assert = 
~d4.that = 
~d2.name = Export one organization as string
~d3.export = 
~d4.organizations = "{{org_name2}}"
~d3.register = string_asserts
~d2.assert = 
~d4.that = 
~d1.always = 
~d2.name = Remove our inventory
~d3.inventory = 
~d4.name = "{{ inventory_name1 }}"
~d4.organization = "{{ org_name1 }}"
~d4.state = absent
~d2.name = Remove test organizations
~d3.organization = 
~d4.name = "{{ item }}"
~d4.state = absent
~d3.loop = 
