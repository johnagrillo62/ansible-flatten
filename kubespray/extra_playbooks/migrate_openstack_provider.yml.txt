~d0.name = Remove old cloud provider config
~d1.hosts = kube_node:kube_control_plane
~d1.tasks = 
~d2.name = Remove old cloud provider config
~d3.file = 
~d4.path = "{{ item }}"
~d4.state = absent
~d3.with_items = 
~d0.name = Migrate intree Cinder PV
~d1.hosts = kube_control_plane[0]
~d1.tasks = 
~d2.name = Include kubespray-default variables
~d3.include_vars = ../roles/kubespray_defaults/defaults/main/main.yml
~d2.name = Copy get_cinder_pvs.sh to first control plane node
~d3.copy = 
~d4.src = get_cinder_pvs.sh
~d4.dest = /tmp
~d4.mode = u+rwx
~d2.name = Get PVs provisioned by in-tree cloud provider
~d3.command = /tmp/get_cinder_pvs.sh
~d3.register = pvs
~d2.name = Remove get_cinder_pvs.sh
~d3.file = 
~d4.path = /tmp/get_cinder_pvs.sh
~d4.state = absent
~d2.name = Rewrite the "pv.kubernetes.io/provisioned-by" annotation
~d3.command = "{{ bin_dir }}/kubectl annotate --overwrite pv {{ item }} pv.kubernetes.io/provisioned-by=cinder.csi.openstack.org"
~d3.loop = "{{ pvs.stdout_lines | list }}"
