[0].name = Import DebOps global handlers
[0]["ansible.builtin.import_role"].name = global_handlers
[1].name = Configure Elastic APT repository
[1]["ansible.builtin.apt_repository"].update_cache = True
[1]["ansible.builtin.apt_repository"].repo = {{ item.repo }}
[1]["ansible.builtin.apt_repository"].filename = {{ item.filename | d(omit) }}
[1]["ansible.builtin.apt_repository"].state = present
[1].with_items = {{ elastic_co__repositories }}
[1].when = item.enabled | d(True)
[2].name = Install Elastic packages
[2]["ansible.builtin.package"].name = {{ q("flattened", (elastic_co__packages
                              + elastic_co__group_packages
                              + elastic_co__host_packages
                              + elastic_co__dependent_packages)) }}
[2]["ansible.builtin.package"].state = present
[2].notify[0] = Refresh host facts
[2].register = elastic_co__register_install
[2].until = elastic_co__register_install is succeeded
[3].name = Make sure that Ansible local facts directory exists
[3]["ansible.builtin.file"].path = /etc/ansible/facts.d
[3]["ansible.builtin.file"].state = directory
[3]["ansible.builtin.file"].owner = root
[3]["ansible.builtin.file"].group = root
[3]["ansible.builtin.file"].mode = 0755
[4].name = Save Elastic local facts
[4]["ansible.builtin.template"].src = etc/ansible/facts.d/elastic_co.fact.j2
[4]["ansible.builtin.template"].dest = /etc/ansible/facts.d/elastic_co.fact
[4]["ansible.builtin.template"].owner = root
[4]["ansible.builtin.template"].group = root
[4]["ansible.builtin.template"].mode = 0755
[4].notify[0] = Refresh host facts
[4].tags[0] = meta::facts
[5].name = Update Ansible facts if they were modified
[5]["ansible.builtin.meta"] = flush_handlers
