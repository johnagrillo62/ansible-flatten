[0].name = Import DebOps global handlers
[0]["ansible.builtin.import_role"].name = global_handlers
[1].name = Make sure that Ansible local facts directory exists
[1]["ansible.builtin.file"].path = /etc/ansible/facts.d
[1]["ansible.builtin.file"].state = directory
[1]["ansible.builtin.file"].owner = root
[1]["ansible.builtin.file"].group = root
[1]["ansible.builtin.file"].mode = 0755
[2].name = Save nsswitch local facts
[2]["ansible.builtin.template"].src = etc/ansible/facts.d/nsswitch.fact.j2
[2]["ansible.builtin.template"].dest = /etc/ansible/facts.d/nsswitch.fact
[2]["ansible.builtin.template"].owner = root
[2]["ansible.builtin.template"].group = root
[2]["ansible.builtin.template"].mode = 0755
[2].notify[0] = Refresh host facts
[2].tags[0] = meta::facts
[3].name = Update Ansible facts if they were modified
[3]["ansible.builtin.meta"] = flush_handlers
[4].name = Generate Name Service Switch configuration
[4]["ansible.builtin.template"].src = etc/nsswitch.conf.j2
[4]["ansible.builtin.template"].dest = /etc/nsswitch.conf
[4]["ansible.builtin.template"].owner = root
[4]["ansible.builtin.template"].group = root
[4]["ansible.builtin.template"].mode = 0644
[4].register = nsswitch__register_config
[4].when = nsswitch__enabled | bool
[5].name = Restart systemd-logind to fix NSS lookups
[5]["ansible.builtin.service"].name = systemd-logind
[5]["ansible.builtin.service"].state = restarted
[5].when = ansible_service_mgr == 'systemd' and nsswitch__register_config is changed and ansible_connection != 'local'
