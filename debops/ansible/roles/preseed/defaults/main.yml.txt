preseed__subdomain = seed
preseed__base_domain = {{ preseed__subdomain + "." + ansible_domain }}
preseed__domains[0] = {{ preseed__base_domain }}
preseed__domains[1] = {{ preseed__base_domain | split(".") | first }}
preseed__domains[2] = {{ "~^(?<preseed>.+)\." + preseed__base_domain | replace(".", "\.") + "$" }}
preseed__domains[3] = {{ "~^(?<preseed>.+)\." + ansible_domain | replace(".", "\.") + "$" }}
preseed__domains[4] = {{ "~^(?<preseed>.+)\." + preseed__subdomain | replace(".", "\.") + "$" }}
preseed__domains[5] = {{ "~^(?<preseed>.+)$" }}
preseed__www = {{ (ansible_local.fhs.www | d("/srv/www"))
                  + "/sites/debian-preseed/public" }} 
preseed__root_sshkeys[0] = {{ lookup("pipe", "ssh-add -L | grep ^\\\(sk-\\\)\\\?ssh || cat ~/.ssh/*.pub || cat ~/.ssh/authorized_keys || true") }}
preseed__admin_name = ansible
preseed__admin_fullname = Ansible Control User
preseed__admin_sshkeys[0] = {{ lookup("pipe", "ssh-add -L | grep ^\\\(sk-\\\)\\\?ssh || cat ~/.ssh/*.pub || cat ~/.ssh/authorized_keys || true") }}
preseed__debian_postinst_commands = 
preseed__debian_packages[0] = python3
preseed__debian_packages[1] = python3-apt
preseed__debian_packages[2] = python3-pip
preseed__debian_packages[3] = python3-debian
preseed__debian_packages[4] = lsb-release
preseed__debian_packages[5] = git
preseed__debian_packages[6] = curl
preseed__debian_kernel_arguments[0] = cgroup_enable=memory
preseed__debian_kernel_arguments[1] = swapaccount=1
preseed__debian_password_length = 32
preseed__debian_root_password = {{ lookup('password', secret + '/credentials/' + inventory_hostname
                                          + '/preseed/debian/root/password '
                                          + 'encrypt=sha512_crypt length=' + preseed__debian_password_length) }}

preseed__debian_admin_password = {{ lookup('password', secret + '/credentials/' + inventory_hostname
                                           + '/preseed/debian/' + preseed__admin_name + '/password '
                                           + 'encrypt=sha512_crypt length=' + preseed__debian_password_length) }}

preseed__default_definitions[0].name = debian-stretch
preseed__default_definitions[0].flavor = debian
preseed__default_definitions[0].release = stretch
preseed__default_definitions[0].options = {{ preseed__options_interactive_partman
                 + preseed__options_enable_nonfree }} 
preseed__default_definitions[1].name = debian-buster
preseed__default_definitions[1].flavor = debian
preseed__default_definitions[1].release = buster
preseed__default_definitions[1].options = {{ preseed__options_interactive_partman
                 + preseed__options_enable_nonfree }} 
preseed__default_definitions[2].name = debian-bullseye
preseed__default_definitions[2].flavor = debian
preseed__default_definitions[2].release = bullseye
preseed__default_definitions[2].options = {{ preseed__options_interactive_partman
                 + preseed__options_enable_nonfree }} 
preseed__default_definitions[3].name = debian-bookworm
preseed__default_definitions[3].flavor = debian
preseed__default_definitions[3].release = bookworm
preseed__default_definitions[3].options = {{ preseed__options_interactive_partman
                 + preseed__options_enable_nonfree }} 
preseed__default_definitions[4].name = debian-trixie
preseed__default_definitions[4].flavor = debian
preseed__default_definitions[4].release = trixie
preseed__default_definitions[4].options = {{ preseed__options_interactive_partman
                 + preseed__options_enable_nonfree }} 
preseed__default_definitions[5].name = debian-stretch-user
preseed__default_definitions[5].flavor = debian-user
preseed__default_definitions[5].release = stretch
preseed__default_definitions[5].options = {{ preseed__options_interactive_partman
                 + preseed__options_ansible_user
                 + preseed__options_enable_nonfree }}

preseed__default_definitions[5].admin_username = {{ preseed__admin_name }}
preseed__default_definitions[6].name = debian-buster-user
preseed__default_definitions[6].flavor = debian-user
preseed__default_definitions[6].release = buster
preseed__default_definitions[6].options = {{ preseed__options_interactive_partman
                 + preseed__options_ansible_user
                 + preseed__options_enable_nonfree }}

preseed__default_definitions[6].admin_username = {{ preseed__admin_name }}
preseed__default_definitions[7].name = debian-bullseye-user
preseed__default_definitions[7].flavor = debian-user
preseed__default_definitions[7].release = bullseye
preseed__default_definitions[7].options = {{ preseed__options_interactive_partman
                 + preseed__options_ansible_user
                 + preseed__options_enable_nonfree }}

preseed__default_definitions[7].admin_username = {{ preseed__admin_name }}
preseed__default_definitions[8].name = debian-bookworm-user
preseed__default_definitions[8].flavor = debian-user
preseed__default_definitions[8].release = bookworm
preseed__default_definitions[8].options = {{ preseed__options_interactive_partman
                 + preseed__options_ansible_user
                 + preseed__options_enable_nonfree }}

preseed__default_definitions[8].admin_username = {{ preseed__admin_name }}
preseed__default_definitions[9].name = debian-trixie-user
preseed__default_definitions[9].flavor = debian-user
preseed__default_definitions[9].release = trixie
preseed__default_definitions[9].options = {{ preseed__options_interactive_partman
                 + preseed__options_ansible_user
                 + preseed__options_enable_nonfree }}

preseed__default_definitions[9].admin_username = {{ preseed__admin_name }}
preseed__default_definitions[10].name = debian-stretch-vm
preseed__default_definitions[10].flavor = debian-vm
preseed__default_definitions[10].release = stretch
preseed__default_definitions[11].name = debian-buster-vm
preseed__default_definitions[11].flavor = debian-vm
preseed__default_definitions[11].release = buster
preseed__default_definitions[12].name = debian-bullseye-vm
preseed__default_definitions[12].flavor = debian-vm
preseed__default_definitions[12].release = bullseye
preseed__default_definitions[13].name = debian-bookworm-vm
preseed__default_definitions[13].flavor = debian-vm
preseed__default_definitions[13].release = bookworm
preseed__default_definitions[14].name = debian-trixie-vm
preseed__default_definitions[14].flavor = debian-vm
preseed__default_definitions[14].release = trixie
preseed__default_definitions[15].name = debian-stretch-vm-user
preseed__default_definitions[15].flavor = debian-vm-user
preseed__default_definitions[15].release = stretch
preseed__default_definitions[15].options = {{ preseed__options_ansible_user }}
preseed__default_definitions[15].admin_username = {{ preseed__admin_name }}
preseed__default_definitions[16].name = debian-buster-vm-user
preseed__default_definitions[16].flavor = debian-vm-user
preseed__default_definitions[16].release = buster
preseed__default_definitions[16].options = {{ preseed__options_ansible_user }}
preseed__default_definitions[16].admin_username = {{ preseed__admin_name }}
preseed__default_definitions[17].name = debian-bullseye-vm-user
preseed__default_definitions[17].flavor = debian-vm-user
preseed__default_definitions[17].release = bullseye
preseed__default_definitions[17].options = {{ preseed__options_ansible_user }}
preseed__default_definitions[17].admin_username = {{ preseed__admin_name }}
preseed__default_definitions[18].name = debian-bookworm-vm-user
preseed__default_definitions[18].flavor = debian-vm-user
preseed__default_definitions[18].release = bookworm
preseed__default_definitions[18].options = {{ preseed__options_ansible_user }}
preseed__default_definitions[18].admin_username = {{ preseed__admin_name }}
preseed__default_definitions[19].name = debian-trixie-vm-user
preseed__default_definitions[19].flavor = debian-vm-user
preseed__default_definitions[19].release = trixie
preseed__default_definitions[19].options = {{ preseed__options_ansible_user }}
preseed__default_definitions[19].admin_username = {{ preseed__admin_name }}
preseed__combined_definitions = {{ preseed__default_definitions
                                   + preseed__definitions
                                   + preseed__group_definitions
                                   + preseed__host_definitions }}

preseed__original_configuration[0].name = comment_contents
preseed__original_configuration[0].comment = Contents of the preconfiguration file (for ${flavor} on ${release})
preseed__original_configuration[0].state = hidden
preseed__original_configuration[1].name = debian-installer/locale
preseed__original_configuration[1].comment = Localization
Preseeding only locale sets language, country and locale

preseed__original_configuration[1].value = en_US
preseed__original_configuration[2].name = debian-installer/language
preseed__original_configuration[2].comment = The values can also be preseeded individually for greater flexibility.
preseed__original_configuration[2].value = en
preseed__original_configuration[2].state = comment
preseed__original_configuration[3].name = debian-installer/country
preseed__original_configuration[3].value = NL
preseed__original_configuration[3].state = comment
preseed__original_configuration[4].name = comment_debian-installer/locale
preseed__original_configuration[4].option = debian-installer/locale
preseed__original_configuration[4].value = en_GB.UTF-8
preseed__original_configuration[4].state = comment
preseed__original_configuration[5].name = localechooser/supported-locales
preseed__original_configuration[5].comment = Optionally specify additional locales to be generated.
preseed__original_configuration[5].type = multiselect
preseed__original_configuration[5].value = en_US.UTF-8, nl_NL.UTF-8
preseed__original_configuration[5].state = comment
preseed__original_configuration[6].name = keyboard-configuration/xkb-keymap
preseed__original_configuration[6].comment = Keyboard selection.
preseed__original_configuration[6].type = select
preseed__original_configuration[6].value = us
preseed__original_configuration[7].name = keyboard-configuration/toggle
preseed__original_configuration[7].type = select
preseed__original_configuration[7].value = No toggling
preseed__original_configuration[7].state = comment
preseed__original_configuration[8].name = netcfg/enable
preseed__original_configuration[8].comment = Network configuration
Disable network configuration entirely. This is useful for cdrom
installations on non-networked devices where the network questions,
warning and long timeouts are a nuisance.

preseed__original_configuration[8].value = False
preseed__original_configuration[8].state = comment
preseed__original_configuration[9].name = netcfg/choose_interface
preseed__original_configuration[9].comment = netcfg will choose an interface that has link if possible. This makes it
skip displaying a list if there is more than one interface.

preseed__original_configuration[9].type = select
preseed__original_configuration[9].value = auto
preseed__original_configuration[10].name = comment_netcfg/choose_interface
preseed__original_configuration[10].option = netcfg/choose_interface
preseed__original_configuration[10].comment = To pick a particular interface instead:
preseed__original_configuration[10].type = select
preseed__original_configuration[10].value = eth1
preseed__original_configuration[10].state = comment
preseed__original_configuration[11].name = netcfg/link_wait_timeout
preseed__original_configuration[11].comment = To set a different link detection timeout (default is 3 seconds).
Values are interpreted as seconds.

preseed__original_configuration[11].value = 10
preseed__original_configuration[11].state = comment
preseed__original_configuration[12].name = netcfg/dhcp_timeout
preseed__original_configuration[12].comment = If you have a slow dhcp server and the installer times out waiting for
it, this might be useful.

preseed__original_configuration[12].value = 60
preseed__original_configuration[12].state = comment
preseed__original_configuration[13].name = netcfg/dhcpv6_timeout
preseed__original_configuration[13].value = 60
preseed__original_configuration[13].state = comment
preseed__original_configuration[14].name = netcfg/disable_autoconfig
preseed__original_configuration[14].comment = If you prefer to configure the network manually, uncomment this line and
the static network configuration below.

preseed__original_configuration[14].value = True
preseed__original_configuration[14].state = comment
preseed__original_configuration[15].name = netcfg/dhcp_failed
preseed__original_configuration[15].comment = If you want the preconfiguration file to work on systems both with and
without a dhcp server, uncomment these lines and the static network
configuration below.

preseed__original_configuration[15].type = note
preseed__original_configuration[15].state = comment
preseed__original_configuration[16].name = netcfg/dhcp_options
preseed__original_configuration[16].type = select
preseed__original_configuration[16].value = Configure network manually
preseed__original_configuration[16].state = comment
preseed__original_configuration[17].name = netcfg/get_ipaddress
preseed__original_configuration[17].comment = Static network configuration.
IPv4 example

preseed__original_configuration[17].value = 192.0.2.42
preseed__original_configuration[17].state = comment
preseed__original_configuration[18].name = netcfg/get_netmask
preseed__original_configuration[18].value = 255.255.255.0
preseed__original_configuration[18].state = comment
preseed__original_configuration[19].name = netcfg/get_gateway
preseed__original_configuration[19].value = 192.0.2.1
preseed__original_configuration[19].state = comment
preseed__original_configuration[20].name = netcfg/get_nameservers
preseed__original_configuration[20].value = 192.0.2.1
preseed__original_configuration[20].state = comment
preseed__original_configuration[21].name = netcfg/confirm_static
preseed__original_configuration[21].value = True
preseed__original_configuration[21].state = comment
preseed__original_configuration[22].name = ipv6_netcfg/get_ipaddress
preseed__original_configuration[22].comment = IPv6 example
preseed__original_configuration[22].option = netcfg/get_ipaddress
preseed__original_configuration[22].value = 2001:db8::2
preseed__original_configuration[22].state = comment
preseed__original_configuration[23].name = ipv6_netcfg/get_netmask
preseed__original_configuration[23].option = netcfg/get_netmask
preseed__original_configuration[23].value = ffff:ffff:ffff:ffff::
preseed__original_configuration[23].state = comment
preseed__original_configuration[24].name = ipv6_netcfg/get_gateway
preseed__original_configuration[24].option = netcfg/get_gateway
preseed__original_configuration[24].value = 2001:db8::1
preseed__original_configuration[24].state = comment
preseed__original_configuration[25].name = ipv6_netcfg/get_nameservers
preseed__original_configuration[25].option = netcfg/get_nameservers
preseed__original_configuration[25].value = 2001:db8::1
preseed__original_configuration[25].state = comment
preseed__original_configuration[26].name = ipv6_netcfg/confirm_static
preseed__original_configuration[26].option = netcfg/confirm_static
preseed__original_configuration[26].value = True
preseed__original_configuration[26].state = comment
preseed__original_configuration[27].name = netcfg/get_hostname
preseed__original_configuration[27].comment = Any hostname and domain names assigned from dhcp take precedence over
values set here. However, setting the values still prevents the questions
from being shown, even if values come from dhcp.

preseed__original_configuration[27].value = unassigned-hostname
preseed__original_configuration[28].name = netcfg/get_domain
preseed__original_configuration[28].value = unassigned-domain
preseed__original_configuration[29].name = netcfg/hostname
preseed__original_configuration[29].comment = If you want to force a hostname, regardless of what either the DHCP
server returns or what the reverse DNS entry for the IP is, uncomment
and adjust the following line.

preseed__original_configuration[29].value = somehost
preseed__original_configuration[29].state = comment
preseed__original_configuration[30].name = netcfg/wireless_wep
preseed__original_configuration[30].comment = Disable that annoying WEP key dialog.
preseed__original_configuration[30].value = 
preseed__original_configuration[31].name = netcfg/dhcp_hostname
preseed__original_configuration[31].comment = The wacky dhcp hostname that some ISPs use as a password of sorts.

preseed__original_configuration[31].value = radish
preseed__original_configuration[31].state = comment
preseed__original_configuration[32].name = hw-detect/load_firmware
preseed__original_configuration[32].comment = If non-free firmware is needed for the network or other hardware, you can
configure the installer to always try to load it, without prompting. Or
change to false to disable asking.

preseed__original_configuration[32].value = True
preseed__original_configuration[32].state = comment
preseed__original_configuration[33].name = anna/choose_modules
preseed__original_configuration[33].comment = Network console
Use the following settings if you wish to make use of the network-console
component for remote installation over SSH. This only makes sense if you
intend to perform the remainder of the installation manually.

preseed__original_configuration[33].value = network-console
preseed__original_configuration[33].state = comment
preseed__original_configuration[34].name = network-console/authorized_keys_url
preseed__original_configuration[34].value = http://192.0.2.1/openssh-key
preseed__original_configuration[34].state = comment
preseed__original_configuration[35].name = network-console/password
preseed__original_configuration[35].type = password
preseed__original_configuration[35].value = r00tme
preseed__original_configuration[35].state = comment
preseed__original_configuration[36].name = network-console/password-again
preseed__original_configuration[36].type = password
preseed__original_configuration[36].value = r00tme
preseed__original_configuration[36].state = comment
preseed__original_configuration[37].name = mirror/protocol
preseed__original_configuration[37].comment = Mirror settings
If you select ftp, the mirror/country string does not need to be set.

preseed__original_configuration[37].value = ftp
preseed__original_configuration[37].state = comment
preseed__original_configuration[38].name = mirror/country
preseed__original_configuration[38].value = manual
preseed__original_configuration[39].name = mirror/http/hostname
preseed__original_configuration[39].value = http.us.debian.org
preseed__original_configuration[40].name = mirror/http/directory
preseed__original_configuration[40].value = /debian
preseed__original_configuration[41].name = mirror/http/proxy
preseed__original_configuration[41].value = 
preseed__original_configuration[42].name = mirror/suite
preseed__original_configuration[42].comment = Suite to install.
preseed__original_configuration[42].value = testing
preseed__original_configuration[42].state = comment
preseed__original_configuration[43].name = mirror/udeb/suite
preseed__original_configuration[43].comment = Suite to use for loading installer components (optional)
preseed__original_configuration[43].value = testing
preseed__original_configuration[43].state = comment
preseed__original_configuration[44].name = passwd/root-login
preseed__original_configuration[44].comment = Account setup
Skip creation of a root account (normal user account will be able to
use sudo).

preseed__original_configuration[44].value = False
preseed__original_configuration[44].state = comment
preseed__original_configuration[45].name = passwd/make-user
preseed__original_configuration[45].comment = Alternatively, to skip creation of a normal user account.
preseed__original_configuration[45].value = False
preseed__original_configuration[45].state = comment
preseed__original_configuration[46].name = passwd/root-password
preseed__original_configuration[46].comment = Root password, either in clear text
preseed__original_configuration[46].type = password
preseed__original_configuration[46].value = r00tme
preseed__original_configuration[46].state = comment
preseed__original_configuration[47].name = passwd/root-password-again
preseed__original_configuration[47].type = password
preseed__original_configuration[47].value = r00tme
preseed__original_configuration[47].state = comment
preseed__original_configuration[48].name = passwd/root-password-crypted
preseed__original_configuration[48].comment = or encrypted using a crypt(3) hash.
preseed__original_configuration[48].type = password
preseed__original_configuration[48].value = [crypt(3) hash]
preseed__original_configuration[48].state = comment
preseed__original_configuration[49].name = passwd/user-fullname
preseed__original_configuration[49].comment = To create a normal user account.
preseed__original_configuration[49].value = Debian User
preseed__original_configuration[49].state = comment
preseed__original_configuration[50].name = passwd/username
preseed__original_configuration[50].value = debian
preseed__original_configuration[50].state = comment
preseed__original_configuration[51].name = passwd/user-password
preseed__original_configuration[51].comment = Normal user's password, either in clear text
preseed__original_configuration[51].type = password
preseed__original_configuration[51].value = insecure
preseed__original_configuration[51].state = comment
preseed__original_configuration[52].name = passwd/user-password-again
preseed__original_configuration[52].type = password
preseed__original_configuration[52].value = insecure
preseed__original_configuration[52].state = comment
preseed__original_configuration[53].name = passwd/user-password-crypted
preseed__original_configuration[53].comment = or encrypted using a crypt(3) hash.
preseed__original_configuration[53].type = password
preseed__original_configuration[53].value = [crypt(3) hash]
preseed__original_configuration[53].state = comment
preseed__original_configuration[54].name = passwd/user-uid
preseed__original_configuration[54].comment = Create the first user with the specified UID instead of the default.
preseed__original_configuration[54].value = 1010
preseed__original_configuration[54].state = comment
preseed__original_configuration[55].name = passwd/user-default-groups
preseed__original_configuration[55].comment = The user account will be added to some standard initial groups.
To override that, use this.

preseed__original_configuration[55].value[0] = audio
preseed__original_configuration[55].value[1] = cdrom
preseed__original_configuration[55].value[2] = video
preseed__original_configuration[55].state = comment
preseed__original_configuration[56].name = clock-setup/utc
preseed__original_configuration[56].comment = Clock and time zone setup
Controls whether or not the hardware clock is set to UTC.

preseed__original_configuration[56].value = True
preseed__original_configuration[57].name = time/zone
preseed__original_configuration[57].comment = You may set this to any valid setting for $TZ; see the contents of
/usr/share/zoneinfo/ for valid values.

preseed__original_configuration[57].value = US/Eastern
preseed__original_configuration[58].name = clock-setup/ntp
preseed__original_configuration[58].comment = Controls whether to use NTP to set the clock during the install
preseed__original_configuration[58].value = True
preseed__original_configuration[59].name = clock-setup/ntp-server
preseed__original_configuration[59].comment = NTP server to use. The default is almost always fine here.
preseed__original_configuration[59].value = ntp.example.com
preseed__original_configuration[59].state = comment
preseed__original_configuration[60].name = partman-auto/init_automatically_partition
preseed__original_configuration[60].comment = Partitioning
If the system has free space you can choose to only partition that space.
This is only honoured if partman-auto/method (below) is not set.

preseed__original_configuration[60].type = select
preseed__original_configuration[60].value = biggest_free
preseed__original_configuration[60].state = comment
preseed__original_configuration[61].name = partman-auto/disk
preseed__original_configuration[61].comment = Alternatively, you may specify a disk to partition. If the system has only
one disk the installer will default to using that, but otherwise the device
name must be given in traditional, non-devfs format (so e.g. /dev/sda
and not e.g. /dev/discs/disc0/disc).
For example, to use the first SCSI/SATA hard disk:

preseed__original_configuration[61].value = /dev/sda
preseed__original_configuration[61].state = comment
preseed__original_configuration[62].name = partman-auto/method
preseed__original_configuration[62].comment = In addition, you'll need to specify the method to use.
The presently available methods are:
- regular: use the usual partition types for your architecture
- lvm:     use LVM to partition the disk
- crypto:  use LVM within an encrypted partition

preseed__original_configuration[62].value = lvm
preseed__original_configuration[63].name = partman-auto-lvm/guided_size
preseed__original_configuration[63].comment = You can define the amount of space that will be used for the LVM volume
group. It can either be a size with its unit (eg. 20 GB), a percentage of
free space or the 'max' keyword.

preseed__original_configuration[63].value = max
preseed__original_configuration[64].name = partman-lvm/device_remove_lvm
preseed__original_configuration[64].comment = If one of the disks that are going to be automatically partitioned
contains an old LVM configuration, the user will normally receive a
warning. This can be preseeded away...

preseed__original_configuration[64].value = True
preseed__original_configuration[65].name = partman-md/device_remove_md
preseed__original_configuration[65].comment = The same applies to pre-existiing software RAID array:
preseed__original_configuration[65].value = True
preseed__original_configuration[66].name = partman-lvm/confirm
preseed__original_configuration[66].comment = And the same goes for the confirmation to write the lvm partitions.
preseed__original_configuration[66].value = True
preseed__original_configuration[67].name = partman-lvm/confirm_nooverwrite
preseed__original_configuration[67].value = True
preseed__original_configuration[68].name = partman-auto/choose_recipe
preseed__original_configuration[68].comment = You can choose one of the three predefined partitioning recipes:
- atomic: all files in one partition
- home:   separate /home partition
- multi:  separate /home, /var, and /tmp partitions

preseed__original_configuration[68].type = select
preseed__original_configuration[68].value = multi
preseed__original_configuration[69].name = partman-auto/expert_recipe_file
preseed__original_configuration[69].comment = Or provide a recipe of your own...
If you have a way to get a recipe file into the d-i environment, you can
just point at it.

preseed__original_configuration[69].value = /hd-media/recipe
preseed__original_configuration[69].state = comment
preseed__original_configuration[70].name = partman-auto/expert_recipe
preseed__original_configuration[70].comment = If not, you can put an entire recipe into the preconfiguration file in one
(logical) line. This example creates a small /boot partition, suitable
swap, and uses the rest of the space for the root partition:

preseed__original_configuration[70].value = boot-root ::                                            \
        40 50 100 ext3                                  \
                $primary{ } $bootable{ }                \
                method{ format } format{ }              \
                use_filesystem{ } filesystem{ ext3 }    \
                mountpoint{ /boot }                     \
        .                                               \
        500 10000 1000000000 ext3                       \
                method{ format } format{ }              \
                use_filesystem{ } filesystem{ ext3 }    \
                mountpoint{ / }                         \
        .                                               \
        64 512 300% linux-swap                          \
                method{ swap } format{ }                \
        .

preseed__original_configuration[70].state = comment
preseed__original_configuration[71].name = comment_partman_docs
preseed__original_configuration[71].comment = The full recipe format is documented in the file partman-auto-recipe.txt
included in the 'debian-installer' package or available from D-I source
repository. This also documents how to specify settings such as file
system labels, volume group names and which physical devices to include
in a volume group.

preseed__original_configuration[71].state = hidden
preseed__original_configuration[72].name = comment_partman_efi
preseed__original_configuration[72].comment = Partitioning for EFI
If your system needs an EFI partition you could add something like
this to the recipe above, as the first element in the recipe:
              538 538 1075 free                              \
                     $iflabel{ gpt }                         \
                     $reusemethod{ }                         \
                     method{ efi }                           \
                     format{ }                               \
              .                                              \

The fragment above is for the amd64 architecture; the details may be
different on other architectures. The 'partman-auto' package in the
D-I source repository may have an example you can follow.

preseed__original_configuration[72].state = hidden
preseed__original_configuration[73].name = partman-partitioning/confirm_write_new_label
preseed__original_configuration[73].comment = This makes partman automatically partition without confirmation, provided
that you told it what to do using one of the methods above.

preseed__original_configuration[73].value = True
preseed__original_configuration[74].name = partman/choose_partition
preseed__original_configuration[74].type = select
preseed__original_configuration[74].value = finish
preseed__original_configuration[75].name = partman/confirm
preseed__original_configuration[75].value = True
preseed__original_configuration[76].name = partman/confirm_nooverwrite
preseed__original_configuration[76].value = True
preseed__original_configuration[77].name = partman-efi/non_efi_system
preseed__original_configuration[77].comment = Force UEFI booting ('BIOS compatibility' will be lost). Default: false.

preseed__original_configuration[77].value = True
preseed__original_configuration[77].state = comment
preseed__original_configuration[78].name = partman-partitioning/choose_label
preseed__original_configuration[78].comment = Ensure the partition table is GPT - this is required for EFI

preseed__original_configuration[78].value = gpt
preseed__original_configuration[78].state = comment
preseed__original_configuration[79].name = partman-partitioning/default_label
preseed__original_configuration[79].value = gpt
preseed__original_configuration[79].state = comment
preseed__original_configuration[80].name = partman-auto-crypto/erase_disks
preseed__original_configuration[80].comment = When disk encryption is enabled, skip wiping the partitions beforehand.

preseed__original_configuration[80].value = False
preseed__original_configuration[80].state = comment
preseed__original_configuration[81].name = raid_partman-auto/method
preseed__original_configuration[81].option = partman-auto/method
preseed__original_configuration[81].comment = Partitioning using RAID
The method should be set to "raid".

preseed__original_configuration[81].value = raid
preseed__original_configuration[81].state = comment
preseed__original_configuration[82].name = raid_partman-auto/disk
preseed__original_configuration[82].option = partman-auto/disk
preseed__original_configuration[82].comment = Specify the disks to be partitioned. They will all get the same layout,
so this will only work if the disks are the same size.

preseed__original_configuration[82].value[0] = /dev/sda
preseed__original_configuration[82].value[1] = /dev/sdb
preseed__original_configuration[82].state = comment
preseed__original_configuration[83].name = raid_partman-auto/expert_recipe
preseed__original_configuration[83].option = partman-auto/expert_recipe
preseed__original_configuration[83].comment = Next you need to specify the physical partitions that will be used.

preseed__original_configuration[83].value = multiraid ::                                         \
        1000 5000 4000 raid                          \
                $primary{ } method{ raid }           \
        .                                            \
        64 512 300% raid                             \
                method{ raid }                       \
        .                                            \
        500 10000 1000000000 raid                    \
                method{ raid }                       \
        .

preseed__original_configuration[83].state = comment
preseed__original_configuration[84].name = partman-auto-raid/recipe
preseed__original_configuration[84].comment = Last you need to specify how the previously defined partitions will be
used in the RAID setup. Remember to use the correct partition numbers
for logical partitions. RAID levels 0, 1, 5, 6 and 10 are supported;
devices are separated using "#".
Parameters are:
<raidtype> <devcount> <sparecount> <fstype> <mountpoint> \
         <devices> <sparedevices>

preseed__original_configuration[84].value = 1 2 0 ext3 /                    \
      /dev/sda1#/dev/sdb1       \
.                               \
1 2 0 swap -                    \
      /dev/sda5#/dev/sdb5       \
.                               \
0 2 0 ext3 /home                \
      /dev/sda6#/dev/sdb6       \
.

preseed__original_configuration[84].state = comment
preseed__original_configuration[85].name = comment_partman-raid
preseed__original_configuration[85].comment = For additional information see the file partman-auto-raid-recipe.txt
included in the 'debian-installer' package or available from D-I source
repository.

preseed__original_configuration[85].state = hidden
preseed__original_configuration[86].name = partman-md/confirm
preseed__original_configuration[86].comment = This makes partman automatically partition without confirmation.
preseed__original_configuration[86].value = True
preseed__original_configuration[86].state = comment
preseed__original_configuration[87].name = partman/mount_style
preseed__original_configuration[87].comment = Controlling how partitions are mounted
The default is to mount by UUID, but you can also choose "traditional" to
use traditional device names, or "label" to try filesystem labels before
falling back to UUIDs.

preseed__original_configuration[87].type = select
preseed__original_configuration[87].value = uuid
preseed__original_configuration[87].state = comment
preseed__original_configuration[88].name = base-installer/install-recommends
preseed__original_configuration[88].comment = Base system installation
Configure APT to not install recommended packages by default. Use of this
option can result in an incomplete system and should only be used by very
experienced users.

preseed__original_configuration[88].value = False
preseed__original_configuration[88].state = comment
preseed__original_configuration[89].name = base-installer/kernel/image
preseed__original_configuration[89].comment = The kernel image (meta) package to be installed; "none" can be used if no
kernel is to be installed.

preseed__original_configuration[89].value = linux-image-amd64
preseed__original_configuration[89].state = comment
preseed__original_configuration[90].name = apt-setup/non-free
preseed__original_configuration[90].comment = Apt setup
You can choose to install non-free and contrib software.

preseed__original_configuration[90].value = True
preseed__original_configuration[90].state = comment
preseed__original_configuration[91].name = apt-setup/contrib
preseed__original_configuration[91].value = True
preseed__original_configuration[91].state = comment
preseed__original_configuration[92].name = apt-setup/use_mirror
preseed__original_configuration[92].comment = Uncomment this if you don't want to use a network mirror.

preseed__original_configuration[92].value = False
preseed__original_configuration[92].state = comment
preseed__original_configuration[93].name = apt-setup/services-select
preseed__original_configuration[93].comment = Select which update services to use; define the mirrors to be used.
Values shown below are the normal defaults.

preseed__original_configuration[93].type = multiselect
preseed__original_configuration[93].value = security, updates
preseed__original_configuration[93].state = comment
preseed__original_configuration[94].name = apt-setup/security_host
preseed__original_configuration[94].value = security.debian.org
preseed__original_configuration[94].state = comment
preseed__original_configuration[95].name = apt-setup/local0/repository
preseed__original_configuration[95].comment = Additional repositories, local[0-9] available

preseed__original_configuration[95].value = http://server.example.org/debian stable main
preseed__original_configuration[95].state = comment
preseed__original_configuration[96].name = apt-setup/local0/comment
preseed__original_configuration[96].value = local server
preseed__original_configuration[96].state = comment
preseed__original_configuration[97].name = apt-setup/local0/source
preseed__original_configuration[97].comment = Enable deb-src lines
preseed__original_configuration[97].value = True
preseed__original_configuration[97].state = comment
preseed__original_configuration[98].name = apt-setup/local0/key
preseed__original_configuration[98].comment = URL to the public key of the local repository; you must provide a key or
apt will complain about the unauthenticated repository and so the
sources.list line will be left commented out.

If the provided key file ends in ".asc" the key file needs to be an
ASCII-armoured PGP key, if it ends in ".gpg" it needs to use the
"GPG key public keyring" format, the "keybox database" format is
currently not supported.

preseed__original_configuration[98].value = http://server.example.org/key.asc
preseed__original_configuration[98].state = comment
preseed__original_configuration[99].name = debian-installer/allow_unauthenticated
preseed__original_configuration[99].comment = By default the installer requires that repositories be authenticated
using a known gpg key. This setting can be used to disable that
authentication. Warning: Insecure, not recommended.

preseed__original_configuration[99].value = True
preseed__original_configuration[99].state = comment
preseed__original_configuration[100].name = apt-setup/multiarch
preseed__original_configuration[100].comment = Uncomment this to add multiarch configuration for i386

preseed__original_configuration[100].value = i386
preseed__original_configuration[100].state = comment
preseed__original_configuration[101].name = tasksel/first
preseed__original_configuration[101].owner = tasksel
preseed__original_configuration[101].comment = Package selection
preseed__original_configuration[101].type = multiselect
preseed__original_configuration[101].value = standard, web-server, kde-desktop
preseed__original_configuration[101].state = comment
preseed__original_configuration[102].name = pkgsel/include
preseed__original_configuration[102].comment = Individual additional packages to install
preseed__original_configuration[102].value = openssh-server build-essential
preseed__original_configuration[102].state = comment
preseed__original_configuration[103].name = pkgsel/upgrade
preseed__original_configuration[103].comment = Whether to upgrade packages after debootstrap.
Allowed values: none, safe-upgrade, full-upgrade

preseed__original_configuration[103].type = select
preseed__original_configuration[103].value = none
preseed__original_configuration[103].state = comment
preseed__original_configuration[104].name = popularity-contest/participate
preseed__original_configuration[104].owner = popularity-contest
preseed__original_configuration[104].comment = Some versions of the installer can report back on what software you have
installed, and what software you use. The default is not to report back,
but sending reports helps the project determine what software is most
popular and should be included on the first CD/DVD.

preseed__original_configuration[104].value = False
preseed__original_configuration[104].state = comment
preseed__original_configuration[105].name = grub-installer/only_debian
preseed__original_configuration[105].comment = Boot loader installation
Grub is the boot loader (for x86).

This is fairly safe to set, it makes grub install automatically to the UEFI
partition/boot record if no other operating system is detected on the machine.

preseed__original_configuration[105].value = True
preseed__original_configuration[106].name = grub-installer/with_other_os
preseed__original_configuration[106].comment = This one makes grub-installer install to the UEFI partition/boot record, if
it also finds some other OS, which is less safe as it might not be able to
boot that other OS.

preseed__original_configuration[106].value = True
preseed__original_configuration[107].name = grub-installer/bootdev
preseed__original_configuration[107].comment = Due notably to potential USB sticks, the location of the primary drive can
not be determined safely in general, so this needs to be specified:

preseed__original_configuration[107].value = /dev/sda
preseed__original_configuration[107].state = comment
preseed__original_configuration[108].name = grub-installer/bootdev_default
preseed__original_configuration[108].option = grub-installer/bootdev
preseed__original_configuration[108].comment = To install to the primary device (assuming it is not a USB stick):

preseed__original_configuration[108].value = default
preseed__original_configuration[108].state = comment
preseed__original_configuration[109].name = other_grub-installer/only_debian
preseed__original_configuration[109].option = grub-installer/only_debian
preseed__original_configuration[109].comment = Alternatively, if you want to install to a location other than the UEFI
partition/boot record, uncomment and edit these lines:

preseed__original_configuration[109].value = False
preseed__original_configuration[109].state = comment
preseed__original_configuration[110].name = other_grub-installer/with_other_os
preseed__original_configuration[110].option = grub-installer/with_other_os
preseed__original_configuration[110].value = False
preseed__original_configuration[110].state = comment
preseed__original_configuration[111].name = other_grub-installer/bootdev
preseed__original_configuration[111].option = grub-installer/bootdev
preseed__original_configuration[111].value = (hd0,1)
preseed__original_configuration[111].state = comment
preseed__original_configuration[112].name = multi_grub-installer/bootdev
preseed__original_configuration[112].option = grub-installer/bootdev
preseed__original_configuration[112].comment = To install grub to multiple disks:
preseed__original_configuration[112].value[0] = (hd0,1)
preseed__original_configuration[112].value[1] = (hd1,1)
preseed__original_configuration[112].value[2] = (hd2,1)
preseed__original_configuration[112].state = comment
preseed__original_configuration[113].name = grub-installer/password
preseed__original_configuration[113].comment = Optional password for grub, either in clear text

preseed__original_configuration[113].type = password
preseed__original_configuration[113].value = r00tme
preseed__original_configuration[113].state = comment
preseed__original_configuration[114].name = grub-installer/password-again
preseed__original_configuration[114].type = password
preseed__original_configuration[114].value = r00tme
preseed__original_configuration[114].state = comment
preseed__original_configuration[115].name = grub-installer/password-crypted
preseed__original_configuration[115].comment = or encrypted using an MD5 hash, see grub-md5-crypt(8).

preseed__original_configuration[115].type = password
preseed__original_configuration[115].value = [MD5 hash]
preseed__original_configuration[115].state = comment
preseed__original_configuration[116].name = debian-installer/add-kernel-opts
preseed__original_configuration[116].comment = Use the following option to add additional boot parameters for the
installed system (if supported by the bootloader installer).
Note: options passed to the installer will be added automatically.

preseed__original_configuration[116].value = nousb
preseed__original_configuration[116].state = comment
preseed__original_configuration[117].name = finish-install/keep-consoles
preseed__original_configuration[117].comment = Finishing up the installation
During installations from serial console, the regular virtual consoles
(VT1-VT6) are normally disabled in /etc/inittab. Uncomment the next
line to prevent this.

preseed__original_configuration[117].value = True
preseed__original_configuration[117].state = comment
preseed__original_configuration[118].name = finish-install/reboot_in_progress
preseed__original_configuration[118].comment = Avoid that last message about the install being complete.
preseed__original_configuration[118].type = note
preseed__original_configuration[118].value = 
preseed__original_configuration[119].name = cdrom-detect/eject
preseed__original_configuration[119].comment = This will prevent the installer from ejecting the CD during the reboot,
which is useful in some situations.

preseed__original_configuration[119].value = False
preseed__original_configuration[119].state = comment
preseed__original_configuration[120].name = debian-installer/exit/halt
preseed__original_configuration[120].comment = This is how to make the installer shutdown when finished, but not
reboot into the installed system.

preseed__original_configuration[120].value = True
preseed__original_configuration[120].state = comment
preseed__original_configuration[121].name = debian-installer/exit/poweroff
preseed__original_configuration[121].comment = This will power off the machine instead of just halting it.

preseed__original_configuration[121].value = True
preseed__original_configuration[121].state = comment
preseed__original_configuration[122].name = comment_other_preseeds
preseed__original_configuration[122].comment = Preseeding other packages
Depending on what software you choose to install, or if things go wrong
during the installation process, it's possible that other questions may
be asked. You can preseed those too, of course. To get a list of every
possible question that could be asked during an install, do an
installation, and then run these commands:
  debconf-get-selections --installer > file
  debconf-get-selections >> file

preseed__original_configuration[122].state = hidden
preseed__original_configuration[123].name = comment_advanced_options
preseed__original_configuration[123].comment = Advanced options
Running custom commands during the installation
d-i preseeding is inherently not secure. Nothing in the installer checks
for attempts at buffer overflows or other exploits of the values of a
preconfiguration file like this one. Only use preconfiguration files from
trusted locations! To drive that home, and because it's generally useful,
here's a way to run any shell command you'd like inside the installer,
automatically.

preseed__original_configuration[123].state = hidden
preseed__original_configuration[124].name = preseed/early_command
preseed__original_configuration[124].comment = This first command is run as early as possible, just after
preseeding is read.

preseed__original_configuration[124].value = anna-install some-udeb
preseed__original_configuration[124].state = comment
preseed__original_configuration[125].name = partman/early_command
preseed__original_configuration[125].comment = This command is run immediately before the partitioner starts. It may be
useful to apply dynamic partitioner preseeding that depends on the state
of the disks (which may not be visible when preseed/early_command runs).

preseed__original_configuration[125].value = debconf-set partman-auto/disk "$(list-devices disk | head -n1)"
preseed__original_configuration[125].state = comment
preseed__original_configuration[126].name = preseed/late_command
preseed__original_configuration[126].comment = This command is run just before the install finishes, but when there is
still a usable /target directory. You can chroot to /target and use it
directly, or use the apt-install and in-target commands to easily install
packages and run commands in the target system.

preseed__original_configuration[126].value = apt-install zsh; in-target chsh -s /bin/zsh
preseed__original_configuration[126].state = comment
preseed__default_configuration[0].name = debian-installer/locale
preseed__default_configuration[0].value = {{ ansible_local.locales.system_locale | d("en_US.UTF-8") }}
preseed__default_configuration[1].name = mirror/http/hostname
preseed__default_configuration[1].value = deb.debian.org
preseed__default_configuration[2].name = passwd/make-user
preseed__default_configuration[2].value = False
preseed__default_configuration[2].state = present
preseed__default_configuration[3].name = passwd/root-password-crypted
preseed__default_configuration[3].value = {{ preseed__debian_root_password }}
preseed__default_configuration[3].state = present
preseed__default_configuration[4].name = time/zone
preseed__default_configuration[4].value = {{ ansible_local.tzdata.timezone | d("Etc/UTC") }}
preseed__default_configuration[5].name = clock-setup/ntp-server
preseed__default_configuration[5].value[0] = 0.debian.pool.ntp.org
preseed__default_configuration[5].value[1] = 1.debian.pool.ntp.org
preseed__default_configuration[5].value[2] = 2.debian.pool.ntp.org
preseed__default_configuration[5].value[3] = 3.debian.pool.ntp.org
preseed__default_configuration[5].state = present
preseed__default_configuration[6].name = partman-efi/non_efi_system
preseed__default_configuration[6].state = present
preseed__default_configuration[7].name = partman-partitioning/choose_label
preseed__default_configuration[7].state = present
preseed__default_configuration[8].name = partman-partitioning/default_label
preseed__default_configuration[8].state = present
preseed__default_configuration[9].name = apt-setup/services-select
preseed__default_configuration[9].value = security, updates, backports
preseed__default_configuration[9].state = present
preseed__default_configuration[10].name = apt-setup/cdrom/set-first
preseed__default_configuration[10].copy_id_from = apt-setup/multiarch
preseed__default_configuration[10].comment = Do not scan the CD-ROM image for available packages
Ref: https://unix.stackexchange.com/a/409237

preseed__default_configuration[10].value = False
preseed__default_configuration[11].name = apt-setup/cdrom/set-next
preseed__default_configuration[11].copy_id_from = apt-setup/multiarch
preseed__default_configuration[11].value = False
preseed__default_configuration[12].name = apt-setup/cdrom/set-failed
preseed__default_configuration[12].copy_id_from = apt-setup/multiarch
preseed__default_configuration[12].value = False
preseed__default_configuration[13].name = apt-setup/disable-cdrom-entries
preseed__default_configuration[13].copy_id_from = apt-setup/multiarch
preseed__default_configuration[13].value = True
preseed__default_configuration[14].name = tasksel/first
preseed__default_configuration[14].value = ssh-server
preseed__default_configuration[14].state = present
preseed__default_configuration[15].name = pkgsel/include
preseed__default_configuration[15].value = {{ preseed__debian_packages }}
preseed__default_configuration[15].state = present
preseed__default_configuration[16].name = pkgsel/upgrade
preseed__default_configuration[16].value = full-upgrade
preseed__default_configuration[16].state = present
preseed__default_configuration[17].name = grub-installer/with_other_os
preseed__default_configuration[17].value = False
preseed__default_configuration[18].name = grub-installer/bootdev_default
preseed__default_configuration[18].state = present
preseed__default_configuration[19].name = debian-installer/add-kernel-opts
preseed__default_configuration[19].value = {{ preseed__debian_kernel_arguments }}
preseed__default_configuration[19].state = present
preseed__default_configuration[20].name = cdrom-detect/eject
preseed__default_configuration[20].value = True
preseed__default_configuration[20].state = present
preseed__default_configuration[21].name = preseed/late_command
preseed__default_configuration[21].value = in-target curl --output /tmp/postinst.sh http://{{ preseed__base_domain }}/${flavor}/d-i/${release}/postinst.sh;\
in-target chmod +x /tmp/postinst.sh;\
in-target /tmp/postinst.sh

preseed__default_configuration[21].state = present
preseed__combined_configuration = {{ preseed__original_configuration
                                     + preseed__default_configuration
                                     + preseed__configuration
                                     + preseed__group_configuration
                                     + preseed__host_configuration }}

preseed__options_interactive_partman[0].name = partman-auto/method
preseed__options_interactive_partman[0].state = comment
preseed__options_interactive_partman[1].name = partman-auto-lvm/guided_size
preseed__options_interactive_partman[1].state = comment
preseed__options_interactive_partman[2].name = partman-lvm/device_remove_lvm
preseed__options_interactive_partman[2].state = comment
preseed__options_interactive_partman[3].name = partman-md/device_remove_md
preseed__options_interactive_partman[3].state = comment
preseed__options_interactive_partman[4].name = partman-lvm/confirm
preseed__options_interactive_partman[4].state = comment
preseed__options_interactive_partman[5].name = partman-lvm/confirm_nooverwrite
preseed__options_interactive_partman[5].state = comment
preseed__options_interactive_partman[6].name = partman-auto/choose_recipe
preseed__options_interactive_partman[6].state = comment
preseed__options_interactive_partman[7].name = partman-partitioning/confirm_write_new_label
preseed__options_interactive_partman[7].state = comment
preseed__options_interactive_partman[8].name = partman/choose_partition
preseed__options_interactive_partman[8].state = comment
preseed__options_interactive_partman[9].name = partman/confirm
preseed__options_interactive_partman[9].state = comment
preseed__options_interactive_partman[10].name = partman/confirm_nooverwrite
preseed__options_interactive_partman[10].state = comment
preseed__options_ansible_user[0].name = passwd/root-login
preseed__options_ansible_user[0].value = False
preseed__options_ansible_user[0].state = present
preseed__options_ansible_user[1].name = passwd/make-user
preseed__options_ansible_user[1].value = True
preseed__options_ansible_user[1].state = present
preseed__options_ansible_user[2].name = passwd/user-fullname
preseed__options_ansible_user[2].value = {{ preseed__admin_fullname }}
preseed__options_ansible_user[2].state = present
preseed__options_ansible_user[3].name = passwd/username
preseed__options_ansible_user[3].value = {{ preseed__admin_name }}
preseed__options_ansible_user[3].state = present
preseed__options_ansible_user[4].name = passwd/user-password-crypted
preseed__options_ansible_user[4].value = {{ preseed__debian_admin_password }}
preseed__options_ansible_user[4].state = present
preseed__options_ansible_user[5].name = passwd/user-default-groups
preseed__options_ansible_user[5].value[0] = adm
preseed__options_ansible_user[5].value[1] = staff
preseed__options_ansible_user[5].state = present
preseed__options_enable_nonfree[0].name = apt-setup/non-free
preseed__options_enable_nonfree[0].value = True
preseed__options_enable_nonfree[0].state = present
preseed__options_enable_nonfree[1].name = apt-setup/contrib
preseed__options_enable_nonfree[1].value = True
preseed__options_enable_nonfree[1].state = present
preseed__nginx__dependent_servers[0].by_role = debops.preseed
preseed__nginx__dependent_servers[0].enabled = True
preseed__nginx__dependent_servers[0].ssl = False
preseed__nginx__dependent_servers[0].filename = debops.preseed_http
preseed__nginx__dependent_servers[0].name = {{ preseed__domains }}
preseed__nginx__dependent_servers[0].root = {{ preseed__www + "/$preseed" }}
preseed__nginx__dependent_servers[0].webroot_create = False
preseed__nginx__dependent_servers[0].location./ = try_files $uri $uri/ $uri.html /index.html =404;
autoindex on;
types {
        text/plain cfg sh;
}

preseed__nginx__dependent_servers[0].location["~ /d-i/"] = index index.html index.htm preseed.cfg ;
try_files $uri $uri/ $uri.html /index.html =404;
autoindex on;
types {
        text/plain cfg sh;
}

preseed__nginx__dependent_servers[0].state = present
preseed__nginx__dependent_servers[1].by_role = debops.preseed
preseed__nginx__dependent_servers[1].enabled = True
preseed__nginx__dependent_servers[1].listen = False
preseed__nginx__dependent_servers[1].filename = debops.preseed_https
preseed__nginx__dependent_servers[1].name = {{ preseed__domains }}
preseed__nginx__dependent_servers[1].root = {{ preseed__www + "/$preseed" }}
preseed__nginx__dependent_servers[1].webroot_create = False
preseed__nginx__dependent_servers[1].location./ = try_files $uri $uri/ $uri.html /index.html =404;
autoindex on;
types {
        text/plain cfg sh;
}

preseed__nginx__dependent_servers[1].location["~ /d-i/"] = index index.html index.htm preseed.cfg ;
try_files $uri $uri/ $uri.html /index.html =404;
autoindex on;
types {
        text/plain cfg sh;
}

preseed__nginx__dependent_servers[1].state = {{ "present" if (ansible_local.pki.enabled | d()) | bool else "absent" }}
