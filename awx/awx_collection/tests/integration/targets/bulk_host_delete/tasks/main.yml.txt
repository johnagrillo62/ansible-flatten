~d0.name = "Generate a random string for test"
~d1.set_fact = 
~d2.test_id = "{{ lookup('password', '/dev/null chars=ascii_letters length=16') }}"
~d1.when = "test_id is not defined"
~d0.name = "Generate a unique name"
~d1.set_fact = 
~d2.bulk_inv_name = "AWX-Collection-tests-bulk_host_create-{{ test_id }}"
~d0.name = "Get our collection package"
~d1.controller_meta = 
~d1.register = "controller_meta"
~d0.name = "Generate the name of our plugin"
~d1.set_fact = 
~d2.plugin_name = "{{ controller_meta.prefix }}.controller_api"
~d0.name = "Create an inventory"
~d1.inventory = 
~d2.name = "{{ bulk_inv_name }}"
~d2.organization = "Default"
~d2.state = "present"
~d1.register = "inventory_result"
~d0.name = "Bulk Host Create"
~d1.bulk_host_create = 
~d2.hosts = 
~d3.name = "123.456.789.123"
~d4.description = "myhost1"
~d4.variables = 
~d5.food = "carrot"
~d5.color = "orange"
~d3.name = "example.dns.gg"
~d4.description = "myhost2"
~d4.enabled = "false"
~d2.inventory = "{{ bulk_inv_name }}"
~d1.register = "result"
~d0.assert = 
~d2.that = 
~d0.name = "Get our collection package"
~d1.controller_meta = 
~d1.register = "controller_meta"
~d0.name = "Generate the name of our plugin"
~d1.set_fact = 
~d2.plugin_name = "{{ controller_meta.prefix }}.controller_api"
~d0.name = "Setting the inventory hosts endpoint"
~d1.set_fact = 
~d2.endpoint = "inventories/{{ inventory_result.id }}/hosts/"
~d0.name = "Get hosts information from inventory"
~d1.set_fact = 
~d2.hosts_created = "{{ query(plugin_name, endpoint, return_objects=True) }}"
~d2.host_id_list = []
~d0.name = "Extract host IDs from hosts information"
~d1.set_fact = 
~d2.host_id_list = "{{ host_id_list + [item.id] }}"
~d1.loop = "{{ hosts_created }}"
~d0.name = "Bulk Host Delete"
~d1.bulk_host_delete = 
~d2.hosts = "{{ host_id_list }}"
~d1.register = "result"
~d0.assert = 
~d2.that = 
~d0.name = "Delete inventory"
~d1.inventory = 
~d2.name = "{{ bulk_inv_name }}"
~d2.organization = "Default"
~d2.state = "absent"
