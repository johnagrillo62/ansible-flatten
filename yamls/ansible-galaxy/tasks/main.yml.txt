[0].name = Ensure that mutually exclusive options are not set
[0].assert.that[0] = (galaxy_manage_clone + galaxy_manage_download + galaxy_manage_existing) <= 1
[0].assert.fail_msg = "Only one of variables galaxy_manage_clone, galaxy_manage_download and galaxy_manage_existing can be true."

[0].tags = always
[1].name = Set privilege separation default variables
[1].set_fact.__galaxy_remote_user = {{ ansible_user_id | default(omit) }}
[1].set_fact.__galaxy_become = {{ ansible_env.SUDO_USER is defined }}
[1].set_fact.__galaxy_become_user = {{ ansible_user_id | default(omit) }}
[1].tags = always
[2].name = Import layout variable tasks
[2].import_tasks = layout.yml
[2].tags = always
[3].name = Build config facts for *_by_host variables
[3].import_tasks = config-facts.yml
[3].tags = always
[4].name = Include user creation tasks
[4].include_tasks.file = user.yml
[4].include_tasks.apply.tags = galaxy_create_user
[4].when = galaxy_create_user or galaxy_create_privsep_user
[4].tags[0] = galaxy_create_user
[5].name = Collect Galaxy user facts
[5].import_tasks = user-facts.yml
[5].tags = always
[6].name = Include path management tasks
[6].include_tasks.file = paths.yml
[6].include_tasks.apply.tags = galaxy_manage_paths
[6].when = galaxy_manage_paths
[6].tags[0] = galaxy_manage_paths
[7].name = Include clone tasks
[7].include_tasks.file = clone.yml
[7].include_tasks.apply.tags = galaxy_manage_clone
[7].when = galaxy_manage_clone
[7].tags = galaxy_manage_clone
[8].name = Include download tasks
[8].include_tasks.file = download.yml
[8].include_tasks.apply.tags = galaxy_manage_download
[8].when = galaxy_manage_download
[8].tags = galaxy_manage_download
[9].name = Include manage existing galaxy tasks
[9].include_tasks.file = existing.yml
[9].include_tasks.apply.tags = galaxy_manage_existing
[9].when = galaxy_manage_existing
[9].tags = galaxy_manage_existing
[10].name = Include static config setup tasks
[10].include_tasks.file = static_setup.yml
[10].include_tasks.apply.tags = galaxy_config_files
[10].when = galaxy_manage_static_setup
[10].tags = galaxy_config_files
[11].name = Include dependency setup tasks
[11].include_tasks.file = dependencies.yml
[11].include_tasks.apply.tags = galaxy_fetch_dependencies
[11].when = galaxy_fetch_dependencies
[11].tags[0] = galaxy_fetch_dependencies
[12].name = Include mutable config setup tasks
[12].include_tasks.file = mutable_setup.yml
[12].include_tasks.apply.tags = galaxy_manage_mutable_setup
[12].when = galaxy_manage_mutable_setup
[12].tags[0] = galaxy_manage_mutable_setup
[13].name = Include database management tasks
[13].include_tasks.file = database.yml
[13].include_tasks.apply.tags = galaxy_manage_database
[13].when = galaxy_manage_database
[13].tags[0] = galaxy_manage_database
[14].name = Include client build tasks
[14].include_tasks.file = client.yml
[14].include_tasks.apply.tags = galaxy_build_client
[14].when = galaxy_build_client
[14].tags[0] = galaxy_build_client
[15].name = Include error document setup tasks
[15].include_tasks.file = errordocs.yml
[15].include_tasks.apply.tags = galaxy_manage_errordocs
[15].when = galaxy_manage_errordocs
[15].tags[0] = galaxy_manage_errordocs
[16].name = Include Gravity setup tasks
[16].include_tasks.file = gravity.yml
[16].include_tasks.apply.tags = galaxy_manage_gravity
[16].when = galaxy_manage_gravity
[16].tags[0] = galaxy_manage_gravity
[17].name = Include systemd unit setup tasks (Galaxy)
[17].include_tasks.file = systemd-galaxy.yml
[17].include_tasks.apply.tags = galaxy_manage_systemd
[17].when = galaxy_manage_systemd and galaxy_systemd_mode in ["mule", "gravity"]
[17].tags[0] = galaxy_manage_systemd
[18].name = Include systemd unit setup tasks (Reports)
[18].include_tasks.file = systemd-reports.yml
[18].include_tasks.apply.tags = galaxy_manage_systemd_reports
[18].when = galaxy_manage_systemd_reports
[18].tags[0] = galaxy_manage_systemd_reports
[19].name = Include cleanup scheduling tasks
[19].include_tasks.file = cleanup.yml
[19].include_tasks.apply.tags = galaxy_manage_cleanup
[19].when = galaxy_manage_cleanup
[19].tags[0] = galaxy_manage_cleanup
[20].name = Include static directory setup
[20]["ansible.builtin.include_tasks"] = static_dirs.yml
[20].when = galaxy_manage_subdomain_static
[20].tags[0] = galaxy_manage_subdomain_static
[21].name = Include copy themes files
[21]["ansible.builtin.include_tasks"] = themes.yml
[21].loop = {{ galaxy_themes_subdomains if galaxy_themes_subdomains|length or \
    galaxy_manage_themes else [] }}
[21].loop_control.loop_var = subdomain
[21].when = galaxy_manage_themes
[21].tags[0] = galaxy_manage_themes
[22].name = Set global host filters
[22]["ansible.builtin.template"].src = global_host_filters.py.j2
[22]["ansible.builtin.template"].dest = {{ galaxy_themes_global_host_filters_path }}
[22]["ansible.builtin.template"].mode = 0644
[22].when = galaxy_manage_host_filters
