[0].name = Divert original /etc/network/interfaces
[0]["debops.debops.dpkg_divert"].path = /etc/network/interfaces
[0].register = ifupdown__register_divert
[1].name = Provide original interface configuration temporarily
[1]["ansible.builtin.copy"].src = /etc/network/interfaces.dpkg-divert
[1]["ansible.builtin.copy"].dest = {{ ifupdown__reconfigure_init_file }}
[1]["ansible.builtin.copy"].remote_src = True
[1]["ansible.builtin.copy"].owner = root
[1]["ansible.builtin.copy"].group = root
[1]["ansible.builtin.copy"].mode = 0644
[1].when = ifupdown__register_divert is changed and not ansible_check_mode | bool
[2].name = Remove redundant configuration
[2]["ansible.builtin.lineinfile"].dest = {{ ifupdown__reconfigure_init_file }}
[2]["ansible.builtin.lineinfile"].regexp = {{ item }}
[2]["ansible.builtin.lineinfile"].state = absent
[2].with_items[0] = ^source /etc/network/interfaces.d/*
[2].with_items[1] = ^auto lo
[2].with_items[2] = ^iface lo inet loopback
[2].when = ifupdown__register_divert is changed
[3].name = Create /etc/network/interfaces
[3]["ansible.builtin.template"].src = etc/network/interfaces.j2
[3]["ansible.builtin.template"].dest = /etc/network/interfaces
[3]["ansible.builtin.template"].owner = root
[3]["ansible.builtin.template"].group = root
[3]["ansible.builtin.template"].mode = 0644
[3].register = ifupdown__register_main_config
[4].name = Ensure that runtime directory exists
[4]["ansible.builtin.file"].path = /run/network
[4]["ansible.builtin.file"].state = directory
[4]["ansible.builtin.file"].mode = 0755
[4].when = (ifupdown__register_divert is changed or ifupdown__register_main_config is changed)
[5].name = Request entire network reconfiguration
[5]["ansible.builtin.copy"].content = init
[5]["ansible.builtin.copy"].dest = /run/network/debops-ifupdown-reconfigure.networking
[5]["ansible.builtin.copy"].owner = root
[5]["ansible.builtin.copy"].group = root
[5]["ansible.builtin.copy"].mode = 0644
[5].notify[0] = Apply ifupdown configuration
[5].when = (ifupdown__register_divert is changed or ifupdown__register_main_config is changed)
