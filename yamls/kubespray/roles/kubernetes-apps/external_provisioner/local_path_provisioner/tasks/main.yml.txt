[0].name = Local Path Provisioner | Create addon dir
[0].file.path = {{ kube_config_dir }}/addons/local_path_provisioner
[0].file.state = directory
[0].file.owner = root
[0].file.group = root
[0].file.mode = 0755
[0].when[0] = inventory_hostname == groups['kube_control_plane'][0]
[1].name = Local Path Provisioner | Create claim root dir
[1].file.path = {{ local_path_provisioner_claim_root }}
[1].file.state = directory
[1].file.mode = 0755
[2].name = Local Path Provisioner | Render Template
[2].set_fact.local_path_provisioner_templates[0].name = local-path-storage-ns
[2].set_fact.local_path_provisioner_templates[0].file = local-path-storage-ns.yml
[2].set_fact.local_path_provisioner_templates[0].type = ns
[2].set_fact.local_path_provisioner_templates[1].name = local-path-storage-sa
[2].set_fact.local_path_provisioner_templates[1].file = local-path-storage-sa.yml
[2].set_fact.local_path_provisioner_templates[1].type = sa
[2].set_fact.local_path_provisioner_templates[2].name = local-path-storage-cr
[2].set_fact.local_path_provisioner_templates[2].file = local-path-storage-cr.yml
[2].set_fact.local_path_provisioner_templates[2].type = cr
[2].set_fact.local_path_provisioner_templates[3].name = local-path-storage-clusterrolebinding
[2].set_fact.local_path_provisioner_templates[3].file = local-path-storage-clusterrolebinding.yml
[2].set_fact.local_path_provisioner_templates[3].type = clusterrolebinding
[2].set_fact.local_path_provisioner_templates[4].name = local-path-storage-cm
[2].set_fact.local_path_provisioner_templates[4].file = local-path-storage-cm.yml
[2].set_fact.local_path_provisioner_templates[4].type = cm
[2].set_fact.local_path_provisioner_templates[5].name = local-path-storage-deployment
[2].set_fact.local_path_provisioner_templates[5].file = local-path-storage-deployment.yml
[2].set_fact.local_path_provisioner_templates[5].type = deployment
[2].set_fact.local_path_provisioner_templates[6].name = local-path-storage-sc
[2].set_fact.local_path_provisioner_templates[6].file = local-path-storage-sc.yml
[2].set_fact.local_path_provisioner_templates[6].type = sc
[3].name = Local Path Provisioner | Create manifests
[3].template.src = {{ item.file }}.j2
[3].template.dest = {{ kube_config_dir }}/addons/local_path_provisioner/{{ item.file }}
[3].template.mode = 0644
[3].with_items = {{ local_path_provisioner_templates }}
[3].register = local_path_provisioner_manifests
[3].when = inventory_hostname == groups['kube_control_plane'][0]
[4].name = Local Path Provisioner | Apply manifests
[4].kube.name = {{ item.item.name }}
[4].kube.namespace = {{ local_path_provisioner_namespace }}
[4].kube.kubectl = {{ bin_dir }}/kubectl
[4].kube.resource = {{ item.item.type }}
[4].kube.filename = {{ kube_config_dir }}/addons/local_path_provisioner/{{ item.item.file }}
[4].kube.state = latest
[4].with_items = {{ local_path_provisioner_manifests.results }}
[4].when = inventory_hostname == groups['kube_control_plane'][0]
