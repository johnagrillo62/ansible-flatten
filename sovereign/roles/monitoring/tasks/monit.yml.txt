[0].name = Add monitoring vhost to apache
[0].copy = src=etc_apache2_sites-available_00-status.conf dest=/etc/apache2/sites-available/00-status.conf
[1].name = Enable the status vhost
[1].command = a2ensite 00-status.conf creates=/etc/apache2/sites-enabled/00-status.conf
[1].notify = restart apache
[2].name = Install monit
[2].apt = pkg=monit state=present
[2].tags[0] = dependencies
[3].name = Copy monit master config file into place
[3].copy = src=etc_monit_monitrc dest=/etc/monit/monitrc
[3].notify = restart monit
[4].name = Determine if ZNC is installed
[4].stat = path=/usr/lib/znc/configs/znc.conf
[4].register = znc_config_file
[5].name = Copy ZNC monit service config files into place
[5].copy = src=etc_monit_conf.d_znc dest=/etc/monit/conf.d/znc
[5].notify = restart monit
[5].when = znc_config_file.stat.exists
[6].name = Copy monit service config files into place
[6].copy = src=etc_monit_conf.d_{{ item }} dest=/etc/monit/conf.d/{{ item }}
[6].with_items[0] = apache2
[6].with_items[1] = dovecot
[6].with_items[2] = pgsql
[6].with_items[3] = postfix
[6].with_items[4] = sshd
[6].with_items[5] = tomcat
[6].notify = restart monit
