~d0.name = Check icinga2 configuration and restart it on the master node
~d1.ansible.builtin.command = icinga2 daemon -C
~d1.register = icinga__register_check_config
~d1.changed_when = icinga__register_check_config.changed | bool
~d1.notify = [ 'Restart icinga2 on the master node' ]
~d1.delegate_to = '{{ icinga__master_delegate_to }}'
~d0.name = Restart icinga2 on the master node
~d1.ansible.builtin.service = 
~d2.name = 'icinga2'
~d2.state = 'restarted'
~d1.delegate_to = '{{ icinga__master_delegate_to }}'
~d0.name = Trigger Icinga Director configuration deployment
~d1.ansible.builtin.uri = 
~d2.body_format = 'json'
~d2.headers = 
~d3.Accept = 'application/json'
~d2.method = 'POST'
~d2.url = '{{ icinga__director_deploy_api_url }}'
~d2.user = '{{ icinga__director_deploy_api_user }}'
~d2.password = '{{ icinga__director_deploy_api_password }}'
~d1.run_once = True
~d1.when = icinga__director_deploy | bool
~d1.no_log = '{{ debops__no_log | d(True) }}'
