[0].hosts = tag_ansible_group_windows_dbservers
[0].connection = winrm
[0].vars.ansible_ssh_port = 5986
[0].roles[0] = mssql
[0].tags[0] = db
[1].hosts = tag_ansible_group_windows_webservers
[1].connection = winrm
[1].vars.ansible_ssh_port = 5986
[1].roles[0] = iis
[1].roles[1] = web
[1].tags[0] = web
[2].hosts = localhost
[2].connection = local
[2].gather_facts = False
[2].roles[0] = elb
[2].tags[0] = lb
[3].hosts = tag_ansible_group_windows_webservers
[3].connection = winrm
[3].gather_facts = False
[3].vars.ansible_ssh_port = 5986
[3].tasks[0].name = Wait for webserver to come up
[3].tasks[0].local_action = wait_for host={{ inventory_hostname }} port=80 state=started timeout=80
[3].tasks[1].name = Add host to load balancing pool
[3].tasks[1].local_action.module = ec2_elb
[3].tasks[1].local_action.region = us-east-1
[3].tasks[1].local_action.instance_id = {{ ec2_id }}
[3].tasks[1].local_action.ec2_elbs = ansible-windows-demo-lb
[3].tasks[1].local_action.wait_timeout = 330
[3].tasks[1].local_action.state = present
[3].tags[0] = lb
