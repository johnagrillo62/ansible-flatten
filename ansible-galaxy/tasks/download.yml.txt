~d0.name = Download Galaxy
~d1.block = 
~d2.name = Check for Galaxy download receipt
~d3.stat = 
~d4.path = "{{ galaxy_server_dir }}/{{ galaxy_commit_id }}_receipt"
~d3.register = download_receipt
~d2.name = Create Galaxy server directory
~d3.file = 
~d4.path = "{{ galaxy_server_dir }}"
~d4.state = directory
~d4.mode = 0755
~d2.name = Install current version of Galaxy
~d3.unarchive = 
~d4.src = "{{ galaxy_download_url }}"
~d4.dest = "{{ galaxy_server_dir }}"
~d4.extra_opts = --strip-components=1
~d4.remote_src = yes
~d3.when = not download_receipt.stat.exists
~d2.name = Create Galaxy download receipt
~d3.file = 
~d4.path = "{{ galaxy_server_dir }}/{{ galaxy_commit_id }}_receipt"
~d4.state = touch
~d4.mode = 0644
~d3.when = not download_receipt.stat.exists
~d2.name = Include virtualenv setup tasks
~d3.import_tasks = virtualenv.yml
~d2.name = Remove orphaned .pyc files and compile bytecode
~d3.import_tasks = compile.yml
~d1.remote_user = "{{ galaxy_remote_users.privsep | default(__galaxy_remote_user) }}"
~d1.become = "{{ true if galaxy_become_users.privsep is defined else __galaxy_become }}"
~d1.become_user = "{{ galaxy_become_users.privsep | default(__galaxy_become_user) }}"
