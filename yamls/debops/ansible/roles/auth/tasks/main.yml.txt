[0].name = Import custom Ansible plugins
[0]["ansible.builtin.import_role"].name = ansible_plugins
[1].name = Import DebOps secret role
[1]["ansible.builtin.import_role"].name = secret
[2].name = DebOps pre_tasks hook
[2]["ansible.builtin.include_tasks"] = {{ lookup('debops.debops.task_src', 'auth/pre_main.yml') }}
[3].name = Install auth-related packages
[3]["ansible.builtin.apt"].name = {{ auth_packages | flatten }}
[3]["ansible.builtin.apt"].state = present
[3]["ansible.builtin.apt"].install_recommends = no
[3].register = auth__register_packages
[3].until = auth__register_packages is succeeded
[4].name = Configure pam_cracklib
[4]["ansible.builtin.template"].src = usr/share/pam-configs/cracklib.j2
[4]["ansible.builtin.template"].dest = /usr/share/pam-configs/cracklib
[4]["ansible.builtin.template"].owner = root
[4]["ansible.builtin.template"].group = root
[4]["ansible.builtin.template"].mode = 0644
[4].notify[0] = Update PAM common configuration
[4].when = auth_cracklib | bool
[5].name = Configure PAM password history module
[5]["ansible.builtin.include_tasks"] = pam_pwhistory.yml
[5].when = auth_pwhistory_remember is defined and auth_pwhistory_remember
[6].name = DebOps post_tasks hook
[6]["ansible.builtin.include_tasks"] = {{ lookup('debops.debops.task_src', 'auth/post_main.yml') }}
