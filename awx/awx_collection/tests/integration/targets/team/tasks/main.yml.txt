[0].name = Generate a test ID
[0]["ansible.builtin.set_fact"].test_id = {{ lookup('password', '/dev/null chars=ascii_letters length=16') }}
[0].when = test_id is not defined
[1].name = Generate names
[1]["ansible.builtin.set_fact"].team_name = AWX-Collection-tests-team-team-{{ test_id }}
[2].name = Attempt to add a team to a non-existant Organization
[2].team.name = Test Team
[2].team.organization = Missing_Organization
[2].team.state = present
[2].register = result
[2].ignore_errors = true
[3].name = Assert a meaningful error was provided for the failed team creation
[3]["ansible.builtin.assert"].that[0] = result is failed
[3]["ansible.builtin.assert"].that[1] = 'Missing_Organization' in result.msg
[4].name = Create a team
[4].team.name = {{ team_name }}
[4].team.organization = Default
[4].register = result
[5].name = Assert result changed
[5]["ansible.builtin.assert"].that[0] = result.changed
[6].name = Create a team with exists
[6].team.name = {{ team_name }}
[6].team.organization = Default
[6].team.state = exists
[6].register = result
[7].name = Assert result did not change
[7]["ansible.builtin.assert"].that[0] = not result.changed
[8].name = Delete a team
[8].team.name = {{ team_name }}
[8].team.organization = Default
[8].team.state = absent
[8].register = result
[9].name = Assert reesult changed
[9]["ansible.builtin.assert"].that[0] = result.changed
[10].name = Create a team with exists
[10].team.name = {{ team_name }}
[10].team.organization = Default
[10].team.state = exists
[10].register = result
[11].name = Assert result changed
[11]["ansible.builtin.assert"].that[0] = result.changed
[12].name = Delete a team
[12].team.name = {{ team_name }}
[12].team.organization = Default
[12].team.state = absent
[12].register = result
[13].name = Assert result changed
[13]["ansible.builtin.assert"].that[0] = result.changed
[14].name = Check module fails with correct msg
[14].team.name = {{ team_name }}
[14].team.organization = Non_Existing_Org
[14].team.state = present
[14].register = result
[14].ignore_errors = true
[15].name = Assert module failed with expected message
[15]["ansible.builtin.assert"].that[0] = result is failed
[15]["ansible.builtin.assert"].that[1] = 'returned 0 items, expected 1' in result.msg or 'returned 0 items, expected 1' in result.exception or 'returned 0 items, expected 1' in result.get('msg', '')
[16].name = Lookup of the related organization should cause a failure
[16]["ansible.builtin.assert"].that[0] = result.failed
[16]["ansible.builtin.assert"].that[1] = not result.changed
[16]["ansible.builtin.assert"].that[2] = 'Non_Existing_Org' in result.msg
[16]["ansible.builtin.assert"].that[3] = result.total_results == 0
