[0].name = Remove-node | Delete node
[0].command = {{ kubectl }} delete node {{ kube_override_hostname }}
[0].delegate_to = {{ groups['kube_control_plane'] | first }}
[0].when[0] = groups['kube_control_plane'] | length > 0
[0].when[1] = ('k8s_cluster' in group_names) and kube_override_hostname in nodes.stdout_lines
[0].retries = {{ delete_node_retries }}
[0].delay = {{ delete_node_delay_seconds }}
[0].register = result
[0].until = result is not failed
