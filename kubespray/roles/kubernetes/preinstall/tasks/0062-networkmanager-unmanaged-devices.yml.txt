[0].name = NetworkManager | Ensure NetworkManager conf.d dir
[0].file.path = /etc/NetworkManager/conf.d
[0].file.state = directory
[0].file.recurse = true
[1].name = NetworkManager | Prevent NetworkManager from managing Calico interfaces (cali*/tunl*/vxlan.calico)
[1].copy.content = [keyfile]
unmanaged-devices+=interface-name:cali*;interface-name:tunl*;interface-name:vxlan.calico;interface-name:vxlan-v6.calico

[1].copy.dest = /etc/NetworkManager/conf.d/calico.conf
[1].copy.mode = 0644
[1].when[0] = kube_network_plugin == "calico"
[1].notify = Preinstall | reload NetworkManager
[2].name = NetworkManager | Prevent NetworkManager from managing K8S interfaces (kube-ipvs0/nodelocaldns)
[2].copy.content = [keyfile]
unmanaged-devices+=interface-name:kube-ipvs0;interface-name:nodelocaldns

[2].copy.dest = /etc/NetworkManager/conf.d/k8s.conf
[2].copy.mode = 0644
[2].notify = Preinstall | reload NetworkManager
