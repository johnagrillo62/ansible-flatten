doc[0][0].name = Generate a test ID
doc[0][0]["ansible.builtin.set_fact"].test_id = {{ lookup('password', '/dev/null chars=ascii_letters length=16') }}
doc[0][0].when = test_id is not defined
doc[0][1].name = Generate names
doc[0][1]["ansible.builtin.set_fact"].username = AWX-Collection-tests-user-user-{{ test_id }}
doc[0][2].name = Create a User
doc[0][2]["awx.awx.user"].username = {{ username }}
doc[0][2]["awx.awx.user"].first_name = Joe
doc[0][2]["awx.awx.user"].password = {{ 65535 | random | to_uuid }}
doc[0][2]["awx.awx.user"].state = present
doc[0][2].register = result
doc[0][3].name = Assert result changed
doc[0][3]["ansible.builtin.assert"].that[0] = result.changed
doc[0][4].name = Create a User with exists
doc[0][4]["awx.awx.user"].username = {{ username }}
doc[0][4]["awx.awx.user"].first_name = Joe
doc[0][4]["awx.awx.user"].password = {{ 65535 | random | to_uuid }}
doc[0][4]["awx.awx.user"].state = exists
doc[0][4].register = result
doc[0][5].name = Assert results did not change
doc[0][5]["ansible.builtin.assert"].that[0] = not result.changed
doc[0][6].name = Delete a User
doc[0][6]["awx.awx.user"].username = {{ username }}
doc[0][6]["awx.awx.user"].first_name = Joe
doc[0][6]["awx.awx.user"].password = {{ 65535 | random | to_uuid }}
doc[0][6]["awx.awx.user"].state = absent
doc[0][6].register = result
doc[0][7].name = Assert result changed
doc[0][7]["ansible.builtin.assert"].that[0] = result.changed
doc[0][8].name = Create a User with exists
doc[0][8]["awx.awx.user"].username = {{ username }}
doc[0][8]["awx.awx.user"].first_name = Joe
doc[0][8]["awx.awx.user"].password = {{ 65535 | random | to_uuid }}
doc[0][8]["awx.awx.user"].state = exists
doc[0][8].register = result
doc[0][9].name = Assert result changed
doc[0][9]["ansible.builtin.assert"].that[0] = result.changed
doc[0][10].name = Change a User by ID
doc[0][10]["awx.awx.user"].username = {{ result.id }}
doc[0][10]["awx.awx.user"].last_name = User
doc[0][10]["awx.awx.user"].email = joe@example.org
doc[0][10]["awx.awx.user"].state = present
doc[0][10].register = result
doc[0][11].name = Assert result changed
doc[0][11]["ansible.builtin.assert"].that[0] = result.changed
doc[0][12].name = Check idempotency
doc[0][12]["awx.awx.user"].username = {{ username }}
doc[0][12]["awx.awx.user"].first_name = Joe
doc[0][12]["awx.awx.user"].last_name = User
doc[0][12].register = result
doc[0][13].name = Assert result did not change
doc[0][13]["ansible.builtin.assert"].that[0] = not (result.changed)
doc[0][14].name = Rename a User
doc[0][14]["awx.awx.user"].username = {{ username }}
doc[0][14]["awx.awx.user"].new_username = {{ username }}-renamed
doc[0][14]["awx.awx.user"].email = joe@example.org
doc[0][14].register = result
doc[0][15].name = Assert result changed
doc[0][15]["ansible.builtin.assert"].that[0] = result.changed
doc[0][16].name = Delete a User
doc[0][16]["awx.awx.user"].username = {{ username }}-renamed
doc[0][16]["awx.awx.user"].email = joe@example.org
doc[0][16]["awx.awx.user"].state = absent
doc[0][16].register = result
doc[0][17].name = Assert result changed
doc[0][17]["ansible.builtin.assert"].that[0] = result.changed
doc[0][18].name = Create an Auditor
doc[0][18]["awx.awx.user"].first_name = Joe
doc[0][18]["awx.awx.user"].last_name = Auditor
doc[0][18]["awx.awx.user"].username = {{ username }}
doc[0][18]["awx.awx.user"].password = {{ 65535 | random | to_uuid }}
doc[0][18]["awx.awx.user"].email = joe@example.org
doc[0][18]["awx.awx.user"].state = present
doc[0][18]["awx.awx.user"].auditor = true
doc[0][18].register = result
doc[0][19].name = Assert result changed
doc[0][19]["ansible.builtin.assert"].that[0] = result.changed
doc[0][20].name = Delete an Auditor
doc[0][20]["awx.awx.user"].username = {{ username }}
doc[0][20]["awx.awx.user"].email = joe@example.org
doc[0][20]["awx.awx.user"].state = absent
doc[0][20].register = result
doc[0][21].name = Assert result changed
doc[0][21]["ansible.builtin.assert"].that[0] = result.changed
doc[0][22].name = Create a Superuser
doc[0][22]["awx.awx.user"].first_name = Joe
doc[0][22]["awx.awx.user"].last_name = Super
doc[0][22]["awx.awx.user"].username = {{ username }}
doc[0][22]["awx.awx.user"].password = {{ 65535 | random | to_uuid }}
doc[0][22]["awx.awx.user"].email = joe@example.org
doc[0][22]["awx.awx.user"].state = present
doc[0][22]["awx.awx.user"].superuser = true
doc[0][22].register = result
doc[0][23].name = Assert result changed
doc[0][23]["ansible.builtin.assert"].that[0] = result.changed
doc[0][24].name = Delete a Superuser
doc[0][24]["awx.awx.user"].username = {{ username }}
doc[0][24]["awx.awx.user"].email = joe@example.org
doc[0][24]["awx.awx.user"].state = absent
doc[0][24].register = result
doc[0][25].name = Assert result changed
doc[0][25]["ansible.builtin.assert"].that[0] = result.changed
doc[0][26].name = Test SSL parameter
doc[0][26]["awx.awx.user"].first_name = Joe
doc[0][26]["awx.awx.user"].last_name = User
doc[0][26]["awx.awx.user"].username = {{ username }}
doc[0][26]["awx.awx.user"].password = {{ 65535 | random | to_uuid }}
doc[0][26]["awx.awx.user"].email = joe@example.org
doc[0][26]["awx.awx.user"].state = present
doc[0][26]["awx.awx.user"].validate_certs = true
doc[0][26]["awx.awx.user"].controller_host = http://foo.invalid
doc[0][26].ignore_errors = true
doc[0][26].register = result
doc[0][27].name = Assert SSL parameter failure message is meaningful
doc[0][27]["ansible.builtin.assert"].that[0] = result is failed or result.failed | default(false)
doc[0][28].name = Org tasks
doc[0][28].block[0].name = Generate an org name
doc[0][28].block[0]["ansible.builtin.set_fact"].org_name = AWX-Collection-tests-organization-org-{{ test_id }}
doc[0][28].block[1].name = Make sure organization is absent
doc[0][28].block[1].organization.name = {{ org_name }}
doc[0][28].block[1].organization.state = absent
doc[0][28].block[1].register = result
doc[0][28].block[2].name = Create a new Organization
doc[0][28].block[2].organization.name = {{ org_name }}
doc[0][28].block[2].organization.galaxy_credentials[0] = Ansible Galaxy
doc[0][28].block[2].register = result
doc[0][28].block[3].name = Assert result changed
doc[0][28].block[3]["ansible.builtin.assert"].that = result.changed
doc[0][28].block[4].name = Create a User to become admin of an organization
doc[0][28].block[4]["awx.awx.user"].username = {{ username }}-orgadmin
doc[0][28].block[4]["awx.awx.user"].password = {{ username }}-orgadmin
doc[0][28].block[4]["awx.awx.user"].state = present
doc[0][28].block[4]["awx.awx.user"].organization = {{ org_name }}
doc[0][28].block[4].register = result
doc[0][28].block[5].name = Assert result changed
doc[0][28].block[5]["ansible.builtin.assert"].that[0] = result.changed
doc[0][28].block[6].name = Add the user -orgadmin as an admin of the organization
doc[0][28].block[6]["awx.awx.role"].user = {{ username }}-orgadmin
doc[0][28].block[6]["awx.awx.role"].role = admin
doc[0][28].block[6]["awx.awx.role"].organization = {{ org_name }}
doc[0][28].block[6]["awx.awx.role"].state = present
doc[0][28].block[6].register = result
doc[0][28].block[7].name = Assert that user was added as org admin
doc[0][28].block[7]["ansible.builtin.assert"].that[0] = result.changed | default(false)
doc[0][28].block[8].name = Create a User as -orgadmin without using an organization (must fail)
doc[0][28].block[8]["awx.awx.user"].controller_username = {{ username }}-orgadmin
doc[0][28].block[8]["awx.awx.user"].controller_password = {{ username }}-orgadmin
doc[0][28].block[8]["awx.awx.user"].username = {{ username }}
doc[0][28].block[8]["awx.awx.user"].first_name = Joe
doc[0][28].block[8]["awx.awx.user"].password = {{ 65535 | random | to_uuid }}
doc[0][28].block[8]["awx.awx.user"].state = present
doc[0][28].block[8].register = result
doc[0][28].block[8].ignore_errors = true
doc[0][28].block[9].name = Assert result failed
doc[0][28].block[9]["ansible.builtin.assert"].that[0] = result is defined
doc[0][28].block[9]["ansible.builtin.assert"].that[1] = result.failed is defined
doc[0][28].block[9]["ansible.builtin.assert"].that[2] = result.failed | bool
doc[0][28].block[9]["ansible.builtin.assert"].fail_msg = The task did not fail as expected.
doc[0][28].block[9]["ansible.builtin.assert"].success_msg = The task failed as expected.
doc[0][28].block[10].name = Create a User as -orgadmin using an organization
doc[0][28].block[10]["awx.awx.user"].controller_username = {{ username }}-orgadmin
doc[0][28].block[10]["awx.awx.user"].controller_password = {{ username }}-orgadmin
doc[0][28].block[10]["awx.awx.user"].username = {{ username }}
doc[0][28].block[10]["awx.awx.user"].first_name = Joe
doc[0][28].block[10]["awx.awx.user"].password = {{ 65535 | random | to_uuid }}
doc[0][28].block[10]["awx.awx.user"].state = present
doc[0][28].block[10]["awx.awx.user"].organization = {{ org_name }}
doc[0][28].block[10].register = result
doc[0][28].block[11].name = Assert result changed
doc[0][28].block[11]["ansible.builtin.assert"].that[0] = result.changed
doc[0][28].block[12].name = Change a User as -orgadmin by ID using an organization
doc[0][28].block[12]["awx.awx.user"].controller_username = {{ username }}-orgadmin
doc[0][28].block[12]["awx.awx.user"].controller_password = {{ username }}-orgadmin
doc[0][28].block[12]["awx.awx.user"].username = {{ result.id }}
doc[0][28].block[12]["awx.awx.user"].last_name = User
doc[0][28].block[12]["awx.awx.user"].email = joe@example.org
doc[0][28].block[12]["awx.awx.user"].state = present
doc[0][28].block[12]["awx.awx.user"].organization = {{ org_name }}
doc[0][28].block[12].register = result
doc[0][28].block[13].name = Assert result changed
doc[0][28].block[13]["ansible.builtin.assert"].that[0] = result.changed
doc[0][28].block[14].name = Check idempotency as -orgadmin using an organization
doc[0][28].block[14]["awx.awx.user"].controller_username = {{ username }}-orgadmin
doc[0][28].block[14]["awx.awx.user"].controller_password = {{ username }}-orgadmin
doc[0][28].block[14]["awx.awx.user"].username = {{ username }}
doc[0][28].block[14]["awx.awx.user"].first_name = Joe
doc[0][28].block[14]["awx.awx.user"].last_name = User
doc[0][28].block[14]["awx.awx.user"].organization = {{ org_name }}
doc[0][28].block[14].register = result
doc[0][28].block[15].name = Assert result did not change
doc[0][28].block[15]["ansible.builtin.assert"].that[0] = not (result.changed)
doc[0][28].block[16].name = Rename a User as -orgadmin using an organization
doc[0][28].block[16]["awx.awx.user"].controller_username = {{ username }}-orgadmin
doc[0][28].block[16]["awx.awx.user"].controller_password = {{ username }}-orgadmin
doc[0][28].block[16]["awx.awx.user"].username = {{ username }}
doc[0][28].block[16]["awx.awx.user"].new_username = {{ username }}-renamed
doc[0][28].block[16]["awx.awx.user"].email = joe@example.org
doc[0][28].block[16]["awx.awx.user"].organization = {{ org_name }}
doc[0][28].block[16].register = result
doc[0][28].block[17].name = Assert result changed
doc[0][28].block[17]["ansible.builtin.assert"].that[0] = result.changed
doc[0][28].block[18].name = Delete a User as -orgadmin using an organization
doc[0][28].block[18]["awx.awx.user"].controller_username = {{ username }}-orgadmin
doc[0][28].block[18]["awx.awx.user"].controller_password = {{ username }}-orgadmin
doc[0][28].block[18]["awx.awx.user"].username = {{ username }}-renamed
doc[0][28].block[18]["awx.awx.user"].email = joe@example.org
doc[0][28].block[18]["awx.awx.user"].state = absent
doc[0][28].block[18]["awx.awx.user"].organization = {{ org_name }}
doc[0][28].block[18].register = result
doc[0][28].block[19].name = Assert result changed
doc[0][28].block[19]["ansible.builtin.assert"].that[0] = result.changed
doc[0][28].block[20].name = Remove the user -orgadmin as an admin of the organization
doc[0][28].block[20].role.user = {{ username }}-orgadmin
doc[0][28].block[20].role.role = admin
doc[0][28].block[20].role.organization = {{ org_name }}
doc[0][28].block[20].role.state = absent
doc[0][28].block[20].register = result
doc[0][28].block[21].name = Assert result changed
doc[0][28].block[21]["ansible.builtin.assert"].that[0] = result.changed
doc[0][28].block[22].name = Delete the User -orgadmin
doc[0][28].block[22]["awx.awx.user"].username = {{ username }}-orgadmin
doc[0][28].block[22]["awx.awx.user"].password = {{ username }}-orgadmin
doc[0][28].block[22]["awx.awx.user"].state = absent
doc[0][28].block[22]["awx.awx.user"].organization = {{ org_name }}
doc[0][28].block[22].register = result
doc[0][28].block[23].name = Assert result changed
doc[0][28].block[23]["ansible.builtin.assert"].that[0] = result.changed
doc[0][28].block[24].name = Delete the Organization {{ org_name }}
doc[0][28].block[24].organization.name = {{ org_name }}
doc[0][28].block[24].organization.state = absent
doc[0][28].block[24].register = result
doc[0][28].block[25].name = Assert result changed
doc[0][28].block[25]["ansible.builtin.assert"].that = result.changed
doc[1] = ...
