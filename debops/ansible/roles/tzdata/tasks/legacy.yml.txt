[0].name = Configure tzdata area in debconf
[0]["ansible.builtin.debconf"].name = tzdata
[0]["ansible.builtin.debconf"].question = tzdata/Areas
[0]["ansible.builtin.debconf"].vtype = select
[0]["ansible.builtin.debconf"].value = {{ tzdata__timezone.split("/")[0] }}
[0].register = tzdata__register_debconf_set_area
[0].notify[0] = Refresh host facts
[0].when = tzdata__enabled | bool
[1].name = Configure tzdata zone in debconf
[1]["ansible.builtin.debconf"].name = tzdata
[1]["ansible.builtin.debconf"].question = tzdata/Zones/{{ tzdata__timezone.split("/")[0] }}
[1]["ansible.builtin.debconf"].vtype = select
[1]["ansible.builtin.debconf"].value = {{ tzdata__timezone.split("/")[1] }}
[1].register = tzdata__register_debconf_set_zone
[1].notify[0] = Refresh host facts
[1].when = tzdata__enabled | bool
[2].name = Configure timezone in /etc/timezone
[2]["ansible.builtin.copy"].content = {{ tzdata__timezone }}
[2]["ansible.builtin.copy"].dest = /etc/timezone
[2]["ansible.builtin.copy"].mode = 0644
[2].register = tzdata__register_etc_timezone
[2].notify[0] = Refresh host facts
[2].when = tzdata__enabled | bool
[3].name = Check if /etc/localtime is a symlink
[3]["ansible.builtin.stat"].path = /etc/localtime
[3].register = tzdata__register_etc_localtime
[3].when = tzdata__enabled | bool
[4].name = Symlink correct timezone as /etc/localtime
[4]["ansible.builtin.file"].path = /etc/localtime
[4]["ansible.builtin.file"].src = /usr/share/zoneinfo/{{ tzdata__timezone }}
[4]["ansible.builtin.file"].state = link
[4]["ansible.builtin.file"].mode = 0644
[4].notify[0] = Refresh host facts
[4].when = (tzdata__enabled | bool and tzdata__register_etc_timezone is changed and tzdata__register_etc_localtime.stat.islnk | bool)
[5].name = Reconfigure tzdata
[5]["ansible.builtin.command"] = dpkg-reconfigure --frontend noninteractive tzdata
[5].register = tzdata__register_dpkg_reconfigure
[5].changed_when = tzdata__register_dpkg_reconfigure.changed | bool
[5].when = (tzdata__enabled | bool and (tzdata__register_debconf_set_area is changed or tzdata__register_debconf_set_zone is changed or tzdata__register_etc_timezone is changed))
