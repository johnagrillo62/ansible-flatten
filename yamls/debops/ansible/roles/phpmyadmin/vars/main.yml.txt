phpmyadmin_control_user = phpmyadmin
phpmyadmin_control_database = phpmyadmin
phpmyadmin_nginx_server.by_role = debops.phpmyadmin
phpmyadmin_nginx_server.enabled = True
phpmyadmin_nginx_server.default = False
phpmyadmin_nginx_server.type = php5
phpmyadmin_nginx_server.name = {{ phpmyadmin_domain }}
phpmyadmin_nginx_server.root = /usr/share/phpmyadmin
phpmyadmin_nginx_server.webroot_create = False
phpmyadmin_nginx_server.options = client_max_body_size  {{ phpmyadmin_upload_size }};

phpmyadmin_nginx_server.location./ = try_files $uri $uri/ =404;
phpmyadmin_nginx_server.location["~ ^/(setup|libraries)"] = deny all;
phpmyadmin_nginx_server.location_allow./ = {{ phpmyadmin_allow }}
phpmyadmin_nginx_server.php5 = php5_phpmyadmin
phpmyadmin_nginx_server.php5_options = {% if phpmyadmin_allow is defined and phpmyadmin_allow %}
{% for address in phpmyadmin_allow %}
allow {{ address }};
{% endfor %}
deny all;
{% endif %}

phpmyadmin_nginx_upstream_php5.enabled = True
phpmyadmin_nginx_upstream_php5.name = php5_phpmyadmin
phpmyadmin_nginx_upstream_php5.type = php5
phpmyadmin_nginx_upstream_php5.php5 = phpmyadmin
phpmyadmin_php5_pool.enabled = True
phpmyadmin_php5_pool.name = phpmyadmin
phpmyadmin_php5_pool.user = www-data
phpmyadmin_php5_pool.group = www-data
phpmyadmin_php5_pool.pm_max_children = {{ phpmyadmin_php5_max_children }}
phpmyadmin_php5_pool.php_value.post_max_size = {{ phpmyadmin_upload_size }}
phpmyadmin_php5_pool.php_value.upload_max_filesize = {{ phpmyadmin_upload_size }}
