[0].name = Import custom Ansible plugins
[0]["ansible.builtin.import_role"].name = ansible_plugins
[1].name = Import DebOps global handlers
[1]["ansible.builtin.import_role"].name = global_handlers
[2].name = Install required APT packages
[2]["ansible.builtin.package"].name = {{ q("flattened", tinyproxy__base_packages
                             + tinyproxy__packages) }}
[2]["ansible.builtin.package"].state = present
[2].register = tinyproxy__register_packages
[2].until = tinyproxy__register_packages is succeeded
[2].notify[0] = Restart tinyproxy
[3].name = Create required UNIX system group
[3]["ansible.builtin.group"].name = {{ tinyproxy__group }}
[3]["ansible.builtin.group"].state = present
[3]["ansible.builtin.group"].system = True
[4].name = Make sure that required UNIX account exists
[4]["ansible.builtin.user"].name = {{ tinyproxy__user }}
[4]["ansible.builtin.user"].group = {{ tinyproxy__group }}
[4]["ansible.builtin.user"].home = {{ tinyproxy__home }}
[4]["ansible.builtin.user"].comment = Tinyproxy daemon
[4]["ansible.builtin.user"].shell = /bin/false
[4]["ansible.builtin.user"].state = present
[4]["ansible.builtin.user"].system = True
[5].name = Divert the original tinyproxy configuration file
[5]["debops.debops.dpkg_divert"].path = {{ tinyproxy__configuration_file }}
[5]["debops.debops.dpkg_divert"].state = present
[5]["debops.debops.dpkg_divert"].delete = True
[6].name = Generate tinyproxy configuration
[6]["ansible.builtin.template"].src = etc/tinyproxy/tinyproxy.conf.j2
[6]["ansible.builtin.template"].dest = {{ tinyproxy__configuration_file }}
[6]["ansible.builtin.template"].mode = 0644
[6].notify[0] = Restart tinyproxy
[7].name = Make sure that Ansible local facts directory exists
[7]["ansible.builtin.file"].path = /etc/ansible/facts.d
[7]["ansible.builtin.file"].state = directory
[7]["ansible.builtin.file"].mode = 0755
[8].name = Save Tinyproxy local facts
[8]["ansible.builtin.template"].src = etc/ansible/facts.d/tinyproxy.fact.j2
[8]["ansible.builtin.template"].dest = /etc/ansible/facts.d/tinyproxy.fact
[8]["ansible.builtin.template"].mode = 0755
[8].notify[0] = Refresh host facts
[8].tags[0] = meta::facts
[9].name = Update Ansible facts if they were modified
[9]["ansible.builtin.meta"] = flush_handlers
