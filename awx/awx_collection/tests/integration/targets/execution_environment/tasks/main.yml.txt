~d0.name = Generate a random string for test
~d1.set_fact = 
~d2.test_id = "{{ lookup('password', '/dev/null chars=ascii_letters length=16') }}"
~d1.when = test_id is not defined
~d0.name = Generate names
~d1.set_fact = 
~d2.ee_name = "AWX-Collection-tests-ee-{{ test_id }}"
~d0.block = 
~d2.name = Add an EE
~d3.execution_environment = 
~d4.name = "{{ ee_name }}"
~d4.description = "EE for Testing"
~d4.image = quay.io/ansible/awx-ee
~d4.pull = always
~d4.organization = Default
~d3.register = result
~d2.assert = 
~d4.that = 
~d2.name = Add an EE with exists
~d3.execution_environment = 
~d4.name = "{{ ee_name }}"
~d4.description = "EE for Testing"
~d4.image = quay.io/ansible/awx-ee
~d4.pull = always
~d4.organization = Default
~d4.state = exists
~d3.register = result
~d2.assert = 
~d4.that = 
~d2.name = Delete an EE
~d3.execution_environment = 
~d4.name = "{{ ee_name }}"
~d4.description = "EE for Testing"
~d4.image = quay.io/ansible/awx-ee
~d4.pull = always
~d4.organization = Default
~d4.state = absent
~d3.register = result
~d2.assert = 
~d4.that = 
~d2.name = Add an EE with exists
~d3.execution_environment = 
~d4.name = "{{ ee_name }}"
~d4.description = "EE for Testing"
~d4.image = quay.io/ansible/awx-ee
~d4.pull = always
~d4.organization = Default
~d4.state = exists
~d3.register = result
~d2.assert = 
~d4.that = 
~d2.name = Associate the Test EE with Default Org (this should fail)
~d3.execution_environment = 
~d4.name = "{{ ee_name }}"
~d4.organization = Some Org
~d4.image = quay.io/ansible/awx-ee
~d3.register = result
~d3.ignore_errors = yes
~d2.assert = 
~d4.that = 
~d2.name = Rename the Test EEs
~d3.execution_environment = 
~d4.name = "{{ ee_name }}"
~d4.new_name = "{{ ee_name }}a"
~d4.image = quay.io/ansible/awx-ee
~d3.register = result
~d2.assert = 
~d4.that = 
~d1.always = 
~d2.name = Delete the Test EEs
~d3.execution_environment = 
~d4.name = "{{ item }}"
~d4.state = absent
~d4.image = quay.io/ansible/awx-ee
~d3.register = result
~d3.loop = 
~d2.assert = 
~d4.that = 
