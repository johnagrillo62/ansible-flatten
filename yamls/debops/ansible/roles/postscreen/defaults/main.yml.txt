postscreen__deploy_state = present
postscreen__combined_access = {{ postscreen__access
                                 + postscreen__group_access
                                 + postscreen__host_access }}
postscreen__dnsbl_enabled = {{ True
                               if ((ansible_all_ipv4_addresses | d([])
                                    + ansible_all_ipv6_addresses | d([]))
                                   | ansible.utils.ipaddr("public"))
                               else False }}
postscreen__dnsbl_providers[0] = spamhaus
postscreen__dnsbl_providers[1] = cbl
postscreen__dnsbl_providers[2] = spamcop
postscreen__dnsbl_providers[3] = mailspike
postscreen__dnsbl_sites[0].name = zen.spamhaus.org*3
postscreen__dnsbl_sites[0].state = {{ "present"
               if "spamhaus" in postscreen__dnsbl_providers
               else "absent" }}
postscreen__dnsbl_sites[1].name = b.barracudacentral.org*2
postscreen__dnsbl_sites[1].state = {{ "present"
               if "barracuda" in postscreen__dnsbl_providers
               else "absent" }}
postscreen__dnsbl_sites[2].name = cbl.abuseat.org*2
postscreen__dnsbl_sites[2].state = {{ "present"
               if "cbl" in postscreen__dnsbl_providers
               else "absent" }}
postscreen__dnsbl_sites[3].name = bl.spameatingmonkey.net*2
postscreen__dnsbl_sites[3].state = {{ "present"
               if "spameatingmonkey" in postscreen__dnsbl_providers
               else "absent" }}
postscreen__dnsbl_sites[4].name = backscatter.spameatingmonkey.net*2
postscreen__dnsbl_sites[4].state = {{ "present"
               if "spameatingmonkey" in postscreen__dnsbl_providers
               else "absent" }}
postscreen__dnsbl_sites[5].name = bl.spamcop.net
postscreen__dnsbl_sites[5].state = {{ "present"
               if "spamcop" in postscreen__dnsbl_providers
               else "absent" }}
postscreen__dnsbl_sites[6].name = psbl.surriel.com
postscreen__dnsbl_sites[6].state = {{ "present"
               if "psbl" in postscreen__dnsbl_providers
               else "absent" }}
postscreen__dnsbl_sites[7].name = bl.mailspike.net
postscreen__dnsbl_sites[7].state = {{ "present"
               if "mailspike" in postscreen__dnsbl_providers
               else "absent" }}
postscreen__dnsbl_wl_sites[0] = list.dnswl.org=127.[0..255].[0..255].0*-2
postscreen__dnsbl_wl_sites[1] = list.dnswl.org=127.[0..255].[0..255].1*-3
postscreen__dnsbl_wl_sites[2] = list.dnswl.org=127.[0..255].[0..255].[2..255]*-4
postscreen__dnsbl_reply_pcre_map[0] = /^zen\.spamhaus\.org$/
postscreen__dnsbl_reply_pcre_map[1] = /^b\.barracudacentral\.org$/
postscreen__dnsbl_reply_pcre_map[2] = /^bl\.spameatingmonkey\.net$/
postscreen__dnsbl_reply_pcre_map[3] = /^backscatter\.spameatingmonkey\.net$/
postscreen__dnsbl_reply_pcre_map[4] = /^bl\.spamcop\.net$/
postscreen__dnsbl_reply_pcre_map[5] = /^psbl\.surriel\.com$/
postscreen__dnsbl_reply_pcre_map[6] = /^bl\.mailspike\.net$/
postscreen__dnsbl_default_reply = blocked by RBL, see http://multirbl.valli.org/
postscreen__postfix__dependent_packages[0] = postfix-pcre
postscreen__postfix__dependent_maincf[0].name = postscreen_blacklist_action
postscreen__postfix__dependent_maincf[0].value = drop
postscreen__postfix__dependent_maincf[0].state = present
postscreen__postfix__dependent_maincf[1].name = postscreen_greet_action
postscreen__postfix__dependent_maincf[1].value = enforce
postscreen__postfix__dependent_maincf[1].state = present
postscreen__postfix__dependent_maincf[2].name = postscreen_dnsbl_action
postscreen__postfix__dependent_maincf[2].value = enforce
postscreen__postfix__dependent_maincf[2].state = present
postscreen__postfix__dependent_maincf[3].name = postscreen_access_list
postscreen__postfix__dependent_maincf[3].value[0] = permit_mynetworks
postscreen__postfix__dependent_maincf[3].value[1] = cidr:${config_directory}/postscreen_access.cidr
postscreen__postfix__dependent_maincf[3].state = present
postscreen__postfix__dependent_maincf[4].name = postscreen_dnsbl_sites
postscreen__postfix__dependent_maincf[4].value = {{ postscreen__dnsbl_sites + postscreen__dnsbl_wl_sites }}
postscreen__postfix__dependent_maincf[4].state = {{ "present"
               if postscreen__dnsbl_enabled | bool
               else "comment" }}
postscreen__postfix__dependent_maincf[5].name = postscreen_dnsbl_reply_map
postscreen__postfix__dependent_maincf[5].value[0] = pcre:${config_directory}/postscreen_dnsbl_reply_map.pcre
postscreen__postfix__dependent_maincf[5].state = {{ "present"
               if postscreen__dnsbl_enabled | bool
               else "comment" }}
postscreen__postfix__dependent_maincf[6].name = postscreen_dnsbl_threshold
postscreen__postfix__dependent_maincf[6].value = 3
postscreen__postfix__dependent_maincf[6].state = {{ "present"
               if postscreen__dnsbl_enabled | bool
               else "comment" }}
postscreen__postfix__dependent_maincf[7].name = postscreen_dnsbl_whitelist_threshold
postscreen__postfix__dependent_maincf[7].value = -1
postscreen__postfix__dependent_maincf[7].state = {{ "present"
               if postscreen__dnsbl_enabled | bool
               else "comment" }}
postscreen__postfix__dependent_maincf[8].name = postscreen_whitelist_interfaces
postscreen__postfix__dependent_maincf[8].value[0] = static:all
postscreen__postfix__dependent_maincf[8].state = present
postscreen__postfix__dependent_maincf[9].name = postscreen_pipelining_enable
postscreen__postfix__dependent_maincf[9].value = True
postscreen__postfix__dependent_maincf[9].state = present
postscreen__postfix__dependent_maincf[10].name = postscreen_pipelining_action
postscreen__postfix__dependent_maincf[10].value = enforce
postscreen__postfix__dependent_maincf[10].state = present
postscreen__postfix__dependent_maincf[11].name = postscreen_non_smtp_command_enable
postscreen__postfix__dependent_maincf[11].value = True
postscreen__postfix__dependent_maincf[11].state = present
postscreen__postfix__dependent_maincf[12].name = postscreen_non_smtp_command_action
postscreen__postfix__dependent_maincf[12].value = drop
postscreen__postfix__dependent_maincf[12].state = present
postscreen__postfix__dependent_maincf[13].name = postscreen_bare_newline_enable
postscreen__postfix__dependent_maincf[13].value = True
postscreen__postfix__dependent_maincf[13].state = present
postscreen__postfix__dependent_maincf[14].name = postscreen_bare_newline_action
postscreen__postfix__dependent_maincf[14].value = ignore
postscreen__postfix__dependent_maincf[14].state = present
postscreen__postfix__dependent_mastercf[0].name = smtp
postscreen__postfix__dependent_mastercf[0].state = {{ "comment"
               if (postscreen__deploy_state == "present")
               else "ignore" }}
postscreen__postfix__dependent_mastercf[1].name = postscreen
postscreen__postfix__dependent_mastercf[1].state = {{ "present"
               if (postscreen__deploy_state == "present")
               else "ignore" }}
postscreen__postfix__dependent_mastercf[2].name = smtpd
postscreen__postfix__dependent_mastercf[2].state = {{ "present"
               if (postscreen__deploy_state == "present")
               else "ignore" }}
postscreen__postfix__dependent_mastercf[3].name = dnsblog
postscreen__postfix__dependent_mastercf[3].state = {{ "present"
               if (postscreen__deploy_state == "present")
               else "ignore" }}
postscreen__postfix__dependent_mastercf[4].name = tlsproxy
postscreen__postfix__dependent_mastercf[4].state = {{ "present"
               if (postscreen__deploy_state == "present")
               else "ignore" }}
